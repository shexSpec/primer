<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Shape Expressions (ShEx) Primer</title>
    <meta charset='utf-8'/>
    <!-- <script src='https://www.w3.org/Tools/respec/respec-w3c-common' -->
    <!--         async="async" class='remove'></script> -->
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common'
            async="async" class='remove'></script>
    <link rel="stylesheet" href="local.css"/>

    <script class='remove'>
      var respecConfig = {
      localBiblio: {
        "shex-semantics": {
          "authors": ["Eric Prud'hommeaux", "Iovka Boneva", "Jose Labra Gayo", "Gregg Kellogg"],
          "title": "Shape Expressions Language 2.0",
          "href":  "http://shex.io/shex-semantics/"
        }
      },
      specStatus: "CG-DRAFT",
      shortName:  "shex-primer",
      latestVersion:  "http://shex.io/shex-primer/",
      thisVersion:    "http://shex.io/shex-primer-20170327",
      edDraftURI: "https://shexspec.github.io/primer/",
      editors: [
      {   name:       "Thomas Baker",
      company:    "Dublin Core Metadata Initiative",
      companyURL: "http://dublincore.org/" },
      {   name:       "Eric Prudâ€²hommeaux",
      url:        "http://www.w3.org/People/Eric/",
      company:    "W3C/MIT",
      companyURL: "http://www.w3.org/" }
      ],
      wg:           "Shape Expressions Community Group",
      wgURI:        "https://www.w3.org/community/shex/",
      wgPublicList: "public-shex"
    };
    </script>
    <script src="jquery.min.js" type= "text/javascript"></script>
    <script type="text/javascript"><!--
function prepareHighlight (highlightables, onClass, offClass, slide) {
  if (slide === undefined)
    slide = $("body .namespace").last();
  $.each( highlightables, function( index, value ){
    var elts = slide.find( "."+value );
    elts
    .mouseenter(function() {
        elts.removeClass(offClass).addClass(onClass);
    })
    .mouseleave(function() {
        elts.removeClass(onClass).addClass(offClass);
    })
    .addClass(offClass);
  })
}
--> </script>
  </head>
  <body>

    <section id="abstract">
      <p>

        Shape Expressions (ShEx) is a language for describing RDF graph structures.
        A ShEx schema prescribes conditions that RDF data graphs must meet in order to be considered "conformant": which subjects, predicates, and objects may appear in a given graph, in what combinations and with what cardinalities and datatypes.  
        In the ShEx model, an RDF graph is tested against a ShEx schema to yield a validation result that flags any parts of the data which do not conform.
        ShEx schemas are intended for use in validating RDF data, communicating interface parameters and data structures, generating user interfaces, and transforming RDF graphs into other data formats and structures.  
        This primer introduces ShEx by means of annotated examples.  
        Readers should already be familiar with the basic concepts of RDF.
        The primer is a companion to the full ShEx language specification [[shex-semantics]].

      </p>    
    </section>

    <section id="sotd">
      <p>This version of the document represents a Candidate Release, with stable features. Comments and implementations are solicited prior to an eventual Final 2.0 Release.</p>

      <p>The Shape Expressions language is expected to remain stable with the exception of:</p>
      <ul>
        <li>addition of a UNIQUE function</li>
      </ul>
    </section>

    <section id="quickStart">
      <h2>Quick Start</h2>
      <div class="namespace">
        <p>
          Shape Expressions (ShEx) is a language for describing RDF graph structures.
          A ShEx schema prescribes conditions that RDF data graphs must meet in order to be considered "conformant".
          In the ShEx model, an RDF graph is tested against a ShEx schema to yield a validation result that flags any parts of the data which do not conform.
          ShEx schemas are intended for use in validating instance data, communicating interface parameters and data structures, generating user interfaces, and transforming RDF graphs into other data formats and structures.  
          This primer, a companion to the full ShEx language specification [[shex-semantics]], focuses on the common use case of validating instance data.
        </p>
        <p>
          A ShEx schema is built on <span class="new">node constraints</span> and <span class="new">triple constraints</span> that define what it means for a given RDF data graph to conform.
          An RDF triple is the three-part data structure of subject, predicate, and object with which all RDF data is expressed, and an RDF node is the piece of data found in the subject or object position of a triple.
          (Readers unfamiliar these terms may want to consult an RDF primer.[[rdf11-primer]])
          Node constraints and triple constraints are called "constraints" because they define, or "constrain", the set of RDF nodes and data triples that will pass a conformance test.
        </p>
        <p>
          Picture an RDF database (graph) that carries information about enrollees in a school.
          Put yourself into the position of a data manager who wants to ensure that every student "record" in this graph reports a valid age and references one or two guardians, identified by IRI.
          The ShEx schema for accomplishing this has: one <span class="lookit">node constraint</span>, <span class="shape-name">school:enrolleeAge</span>, for matching data nodes with an integer value between 13 and 20; one <span class="lookit">triple constraint</span>, defined within the shape <span class="shape-name">school:Enrollee</span>, for matching one or two triples having the predicate <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span>, and a second <span class="lookit">node constraint</span> for specifying that the object (value) of the triple is an IRI.
          Data that conforms to these constraints will pass validation tests, and data that does not conform will fail.
        </p>
        <div id="example-school-enrolleeAge" class="example wrapper">
          <pre class="schema shexc"><span class="keyword">PREFIX</span> <span class="type">school:</span> <span class="fullURL">&lt;http://school.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>

<span class="comment"># <span class="object new lookit">Node constraint</span></span>
<span class="shape-name">school:enrolleeAge</span> <span class="object"><span class="type">xsd:</span><span class="constant">integer</span> <span class="keyword">MinInclusive</span> 13 <span class="keyword">MaxInclusive</span> 20</span>


<span class="shape-name">school:Enrollee</span> {
  <span class="comment"># <span class="object new lookit">Triple constraint</span> (including <span class="object new lookit">node constraint</span> <span class="keyword">IRI</span>)</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span> <span class="object"><span class="keyword">IRI</span> {1,2}</span>
}
</pre>
          <!-- JSON example -->
          <pre class="schema json">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://school.example/#enrolleeAge",
      "type": "NodeConstraint",
      "datatype": "http://www.w3.org/2001/XMLSchema#integer",
      "mininclusive": 13, "maxinclusive": 20 },
    { "id": "http://school.example/#Enrollee",
      "type": "Shape",
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://ex.example/#hasGuardian",
        "min": 1, "max": 2,
        "valueExpr": {
          "type": "NodeConstraint",
          "nodeKind": "iri" } } }
  ] }
</pre>
          <pre class="instance turtle pass tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>

<span class="fullURL">inst:Student1</span> <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span>
  <span class="fullURL object">inst:Person2</span>, <span class="fullURL object">inst:Person3</span> .
<a class="tryit" href="" data-shape-map="inst:Student1@&lt;http://school.example/#Enrollee&gt;">try it</a></pre>
          <pre class="instance turtle fail tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>

<span class="fullURL">inst:Student2</span> <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span>
  <span class="fullURL object">inst:Person4</span>, <span class="fullURL object">inst:Person5</span>, <span class="fullURL object">inst:Person6</span> .
<a class="tryit" href="" data-shape-map="inst:Student2@school:Enrollee">try it</a></pre>
        </div>
        <p>
        The next example adds a triple constraint on the data predicate <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span>, which must have a value matching the node constraint <span class="shape-name">school:enrolleeAge</span>, which is cited in the triple constraint by reference, indicated by the '@' symbol.
        </p>
        <div id="simple-expressions-example-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" id="school-Enrollee1" style="float:left;">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">school:</span> <span class="fullURL">&lt;http://school.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

<span class="shape-name">school:enrolleeAge</span> <span class="type">xsd:</span><span class="constant">integer</span> <span class="keyword">MinInclusive</span> 13 <span class="keyword">MaxInclusive</span> 20 

<span class="shape-name">school:Enrollee</span> {
  <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> <span class="object">@<span class="shape-name">school:enrolleeAge</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span> <span class="object"><span class="keyword">IRI</span> {1,2}</span>
}
</pre>
          <!-- JSON example -->
          <pre class="schema json">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://school.example/#enrolleeAge",
      "type": "NodeConstraint",
      "datatype": "http://www.w3.org/2001/XMLSchema#integer",
      "mininclusive": 13, "maxinclusive": 20 },
    { "id": "http://school.example/#Enrollee",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "TripleConstraint",
            "predicate": "http://xmlns.com/foaf/0.1/age",
            "valueExpr": "http://school.example/#enrolleeAge" },
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#hasGuardian",
            "min": 1, "max": 2,
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "iri" } }
        ] } }
  ] }
</pre>
            <pre class="instance turtle pass tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">school:</span> <span class="fullURL">&lt;http://school.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

<span class="alice  lowlight1 top"><span class="fullURL">inst:Alice</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> <span class="object">13</span> ;                     </span>
<span class="alice  lowlight1 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span> <span class="fullURL object">inst:Person2</span>, <span class="fullURL object">inst:Person3</span> .</span>

<span class="bob    lowlight1 top"><span class="fullURL">inst:Bob</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> <span class="object">15</span> ;                       </span>
<span class="bob    lowlight1 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span> <span class="fullURL object">inst:Person4</span> .              </span>
<a class="tryit" href="" data-shape-map="inst:Alice@&lt;http://school.example/#Enrollee&gt;,inst:Bob@&lt;http://school.example/#Enrollee&gt;">try it</a></pre>

            <pre class="instance turtle fail tryable">
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">school:</span> <span class="fullURL">&lt;http://school.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

<span class="claire lowlight1 top"><span class="fullURL">inst:Claire</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> <span class="object">12</span> ;                     </span>
<span class="claire lowlight1 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">hasGuardian</span></span> <span class="fullURL object">inst:Person5</span> .               </span>

<span class="don    lowlight1 top bot"><span class="fullURL">inst:Don</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> <span class="object">14</span> .                        </span>
<a class="tryit" href="" data-shape-map="inst:Claire@&lt;http://school.example/#Enrollee&gt;,inst:Don@&lt;http://school.example/#Enrollee&gt;">try it</a></pre>
        </div>
        <div style="clear:both;"></div>

        <p>
          When this ShEx schema is tested against the RDF data, four RDF data nodes (<span class="fullURL">inst:Alice</span>, <span class="fullURL">inst:Bob</span>, <span class="fullURL">inst:Claire</span>, <span class="fullURL">inst:Don</span>) are evaluated against a single shape (<a href="#schema-school-enrolleeAge" class="shape-name">school:Enrollee</a>) to yield a <span class="new">validation result</span>, summarized below.  Implementations of ShEx may provide validation results in other formats and at different levels of verbosity.
        </p>
        <table class="example results">
          <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
          <tr class="pass alice  top lowlight1"><td>inst:Alice </td><td>school:Enrollee</td><td>pass</td><td class="noreason"></td></tr>
          <tr class="pass bob        lowlight1"><td>inst:Bob   </td><td>school:Enrollee</td><td>pass</td><td class="noreason"></td></tr>
          <tr class="fail claire     lowlight1"><td>inst:Claire</td><td>school:Enrollee</td><td>fail</td><td class="fail">No <span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> supplied.</td></tr>
          <tr class="fail don    bot lowlight1"><td>inst:Don   </td><td>school:Enrollee</td><td>fail</td><td class="fail"><span class="predicate"><span class="type">foaf:</span><span class="constant">age</span></span> 14 greater than 13.</td></tr>
        </tbody></table>
        <script type="text/javascript">
          <!--
              prepareHighlight(["alice", "bob", "claire", "don"], "highlight1", "lowlight1");
          -->
        </script>
      </div>
    </section>
    <script type="text/javascript">
      <!--
        Interfaces = [
//          "http://localhost/shexSpec/shex.js/doc/shex-simple.html?"
          "http://rawgit.com/shexSpec/shex.js/master/doc/shex-simple.html?"
        ];
        setTimeout(function () { updateAllTryItLinks($("#langOptions input:checked").val()); }, 2000);
        function updateAllTryItLinks (schemaClass) {
          $(".tryit").map((idx, elt) => { updateTryItLink($(elt), schemaClass); })
        }
        function updateTryItLink (e, schemaClass) {debugger;
          // var schemaElt = $(e.attr("href") + " ." + schemaClass);
          var schemaElt = e.parent().parent().find("."+schemaClass);
          var schema = schemaElt.text().replace(/^#.*?\n/, "");
          var data = e.parent().text();
          data = data.replace(/^\n +/, "").replace(/ *\n?try it\n? */g, "");
          e.attr("href", Interfaces[0] + [
            "interface=simple",
            "schema=" + encodeURIComponent(schema),
            "data=" + encodeURIComponent(data),
            "shape-map=" + encodeURIComponent(e.attr("data-shape-map"))
          ].join("&"));
        }
      -->
    </script>

      <section id="model-and-terminology">
        <h2>ShEx Model and Terminology</h2>

<!-- 
    <section id="conventions" class="introductory">
      <h4>Conventions used in this Primer</h4>
      <p>
        @@@Most sections: ShEx Schema (in ShExC syntax by default), Passing Data, Failing Data, ?Data, Validation Result.
        Most examples support highlighting: mousing over elements in a schema or data example highlights corresponding explanatory text.
        @@@Use of "try it" buttons - link to rawgit.
      </p>
-->
      <!-- p class="note">[for editors] current switches:<br/>
      (<code>j</code>)son vs. shex(<code>c</code>).
      </p>
    </section>
<-->
      <section id="validation">
        <h2>Validating RDF Data</h2>
        <p>
          In the Shape Expressions model, RDF data is seen from the standpoint of its structural components, or abstract syntax.
          An <span class="new">RDF graph</span> is a collection of <span class="new">triples</span>.
          A triple is a data structure composed of three <span class="new">RDF terms</span>.
          An RDF term may be an <span class="new">IRI</span>, <span class="new">blank node (BNode)</span>, or <span class="new">literal</span>.
          In a triple, RDF terms are arranged in a fixed order, or <span class="new">directed arc</span>, from <span class="new">subject</span> to <span class="new">predicate</span> to <span class="new">object</span>.
          From the standpoint of ShEx, a triple may be seen as having an <span class="new">outgoing arc</span> from a subject or an <span class="new">incoming arc</span> to an object.
          RDF data may be serialized in any of several interchangeable concrete syntaxes designed for a variety of application requirements.
        </p>
        <p>
        A <span class="new">ShEx schema</span> is a collection of <span class="new">shape expressions</span> that describe an RDF graph in terms of these abstract-syntactic components.
        A shape expression is a logical combination of <span class="new">node constraints</span> and <span class="new">shapes</span>.
          Node constraints define the characteristics of matching RDF nodes.
          A shape describes a collection of RDF triples touching a given RDF node in terms of <span class="new">triple constraints</span>. Triple constraints specify matching RDF triples in terms of their predicates, direction (whether they are incoming or outgoing arcs with respect to a node), cardinality (how many triples should match), or value (characteristics of its subject or object node).
        </p>
        <p>
          In the <span class="new">ShEx model</span>, a given RDF data graph is tested against a ShEx schema to yield a <span class="new">validation result</span>.
          In the <a href="#simple-expressions-example-1">example above</a>, the RDF nodes <span class="fullURL">inst:Alice</span>, <span class="fullURL">inst:Bob</span>, <span class="fullURL">inst:Claire</span> and <span class="fullURL">inst:Don</span> are tested against the ShEx shape <a href="#schema-school-enrolleeAge" class="shape-name">school:Enrollee</a>.
          In the validation process, each of four nodes in the RDF data is treated, in turn, as a <span class="new">focus node</span>, and triples involving that node are tested against a triple constraint which, in turn, includes the node constraint <span class="keyword">IRI</span>.
          This validation process is controlled by a <span class="new">shape map</span> that specifies how the constructs of a ShEx schema relate to the components of RDF data graphs.
          There are many ways one may select nodes for validation, including queries, APIs, protocols, manual selection, or by the use of <a href="http://w3c.github.io/data-shapes/shacl/#targets">SHACL "target" properties</a>.
        </p>
        <p>
          ShEx may be serialized using any of three interchangeable concrete syntaxes: 
          <a href=" https://github.com/shexSpec/grammar/blob/master/ShExDoc.g4">Shape Expressions Compact Syntax</a> 
          or <span class="new">ShExC</span>, a compact syntax meant for human eyes and fingers; 
          <span class="new">ShExJ</span>, a JSON-LD [[json-ld]] (Javascript) syntax meant for machine processing; and <span class="new">ShExR</span>, the RDF interpretation of ShExJ expressed in RDF Turtle syntax [[turtle]].
          The ShEx schemas in this primer may be viewed in ShExC syntax (by default) or JSON-LD syntax by pressing 'c' or 'j' in the browser or by clicking on the following radio buttons:
        </p>
          <form id="langOptions" action="#"><label><input type="radio" name="presLang" value="shexc" checked="checked"/>ShExC ('c')</label> <label><input type="radio" name="presLang" value="json"/>JSON ('j')</label> .</form>
      </section>

      <section id="vocabulary">
        <h2>Basic Terminology</h2>
        <dl>
          <dt id="vocab-schema">ShEx schema</dt><dd>A collection of shape expressions.</dd>
          <dt id="vocab-shape-expression">shape expression</dt><dd>Shapes and node constraints, possibly combined with AND, OR, and NOT expressions.</dd>
          <dt id="vocab-focus-node">focus node</dt><dd>A RDF data node of interest that is examined during validation.</dd>
          <dt id="vocab-shape">shape</dt><dd>A triple expression aginst which a focus node is tested to see of all arcs in or out matching predicates in the triple expression have appropriate number (cardinality) and values.</dd>
          <dt id="vocab-triple-expression">triple expression</dt><dd>A collection of triple constraints which may be combined in groups or choices.</dd>
          <dt id="vocab-triple-constraint">triple constraint</dt><dd>A constraint with a given predicate which is tested against RDF triples with that predicate and the focus node as subject (or object, for <a href="#inverse-properties">inverse triple constraints</a>).</dd>
          <dt id="vocab-node-constraint">node constraint</dt><dd>A collection of constraints on a given focus node.</dd>
          <dt id="vocab-object">value constraint</dt><dd>A shape expression used in a triple constraint. "Value constraint" (or "value constraint on a property") is a shorthand way of saying: "node constraint on the RDF node of the object associated in a triple with a given predicate".
          For inverse triple constraints, this shorthand is: "node constraint on the RDF node of the subject associated in a triple with a given predicate".</dd>
          <dt id="vocab-value-set">value set</dt><dd>A set of values composed of RDF terms and substrings.</dd>
          <dt id="vocab-value">value</dt><dd>A shorthand designation for the RDF node at the opposite end of an RDF data triple from a focus node. In typical usage, this is the object of a triple, or for <a href="#inverse-properties">inverse triple constraints</a>, its subject.</dd>
          <dt id="vocab-constraint">constraint</dt><dd>A restriction on the set of permissible nodes or triples.</dd>
          <dt id="vocab-shapeMap">shape map</dt><dd>A collection of pairs of RDF data nodes and ShEx shapes that is used for invoking validation and reporting results.</dd>
          <dt id="vocab-shexc">ShExC</dt><dd>A compact syntax meant for human eyes and fingers.</dd> 
          <dt id="vocab-shexj">ShExJ</dt><dd>A JSON-LD [[json-ld]] representation meant for machine processing.</dd>
          <dt id="vocab-shexr">ShExR</dt><dd>The RDF interpretation of ShExJ expressable in any RDF syntax.</dd> 
        </dl>

      </section>

      </section>

      <section id="shex-essentials">
        <h2>ShEx Essentials</h2>
          <p>
            This document uses a running example illustrated by the following graph in which an Issue which is submitted by some person and potentially assigned to the same person or someone else.
            These issues can have a status of <code>unassigned</code> or <code>assigned</code>.
          </p>
<svg
   preserveAspectRatio="xMinYMin meet"
   viewBox="0 0 466 151"
   width="866"
   height="251"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   fill-opacity="0"
   color-rendering="auto"
   color-interpolation="auto"
   stroke="rgb(0,0,0)"
   text-rendering="auto"
   stroke-linecap="square"
   stroke-miterlimit="10"
   stroke-opacity="0"
   shape-rendering="auto"
   fill="rgb(0,0,0)"
   stroke-dasharray="none"
   font-weight="normal"
   stroke-width="1"
   font-family="'Dialog'"
   font-style="normal"
   stroke-linejoin="miter"
   font-size="12"
   stroke-dashoffset="0"
   image-rendering="auto"
   id="svg3351"
   version="1.1"
   inkscape:version="0.48.4 r9939"
   sodipodi:docname="ex1.svg">
  <metadata
     id="metadata3536">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1058"
     id="namedview3534"
     showgrid="false"
     inkscape:zoom="2.0879376"
     inkscape:cx="260.34707"
     inkscape:cy="41.69783"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer2" />
  <!--Generated by the Batik Graphics2D SVG Generator-->
  <defs
     id="genericDefs">
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow2Mend"
       style="overflow:visible;">
      <path
         id="path4575"
         style="fill-rule:evenodd;stroke-width:0.62500000;stroke-linejoin:round;"
         d="M 8.7185878,4.0337352 L -2.2072895,0.016013256 L 8.7185884,-4.0017078 C 6.9730900,-1.6296469 6.9831476,1.6157441 8.7185878,4.0337352 z "
         transform="scale(0.6) rotate(180) translate(0,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Send"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow1Send"
       style="overflow:visible;">
      <path
         id="path4563"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1.0pt;"
         transform="scale(0.2) rotate(180) translate(6,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow1Lend"
       style="overflow:visible;">
      <path
         id="path4551"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1.0pt;"
         transform="scale(0.8) rotate(180) translate(12.5,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="Arrow1Mend"
       style="overflow:visible;">
      <path
         id="path4557"
         d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1.0pt;"
         transform="scale(0.4) rotate(180) translate(10,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow2Mend-7"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4575-8"
         style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
         d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
         transform="scale(-0.6,-0.6)" />
    </marker>
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7228"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path7230"
         style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
         d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
         transform="scale(-0.6,-0.6)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-9"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4551-4"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow2Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow2Mend-0"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4575-2"
         style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
         d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
         transform="scale(-0.6,-0.6)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-7"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4551-8"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-91"
       style="overflow:visible">
      <path
         inkscape:connector-curvature="0"
         id="path4551-41"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
  </defs>
  <g
     id="g3354">
    <defs
       id="defs1">
      <linearGradient
         x1="65"
         gradientUnits="userSpaceOnUse"
         x2="65"
         y1="100"
         y2="0"
         id="linearGradient1"
         spreadMethod="reflect">
        <stop
           stop-opacity="1"
           stop-color="rgb(118,148,200)"
           offset="0%"
           id="stop3358" />
        <stop
           stop-opacity="1"
           stop-color="rgb(238,243,251)"
           offset="100%"
           id="stop3360" />
      </linearGradient>
      <linearGradient
         x1="85"
         gradientUnits="userSpaceOnUse"
         x2="85"
         y1="100"
         y2="0"
         id="linearGradient2"
         spreadMethod="reflect">
        <stop
           stop-opacity="1"
           stop-color="rgb(118,148,200)"
           offset="0%"
           id="stop3363" />
        <stop
           stop-opacity="1"
           stop-color="rgb(238,243,251)"
           offset="100%"
           id="stop3365" />
      </linearGradient>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath1">
        <path
           d="M-7 -7 L141 -7 L141 111 L-7 111 L-7 -7 Z"
           id="path3368" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath2">
        <path
           d="M0 0 L0 85 L130 85 L130 0 Z"
           id="path3371" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath3">
        <path
           d="M0 0 L130 0 L130 15 L0 15 L0 0 Z"
           id="path3374" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath4">
        <path
           d="M-7 -7 L181 -7 L181 111 L-7 111 L-7 -7 Z"
           id="path3377" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath5">
        <path
           d="M0 0 L0 85 L170 85 L170 0 Z"
           id="path3380" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath6">
        <path
           d="M0 0 L170 0 L170 15 L0 15 L0 0 Z"
           id="path3383" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath7">
        <path
           d="M-7 -7 L48 -7 L48 26 L-7 26 L-7 -7 Z"
           id="path3386" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath8">
        <path
           d="M0 0 L37 0 L37 15 L0 15 L0 0 Z"
           id="path3389" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath9">
        <path
           d="M-7 -7 L50 -7 L50 26 L-7 26 L-7 -7 Z"
           id="path3392" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath10">
        <path
           d="M0 0 L39 0 L39 15 L0 15 L0 0 Z"
           id="path3395" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath11">
        <path
           d="M-7 -7 L37 -7 L37 27 L-7 27 L-7 -7 Z"
           id="path3398" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath12">
        <path
           d="M0 0 L26 0 L26 16 L0 16 L0 0 Z"
           id="path3401" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath13">
        <path
           d="M-7 -7 L47 -7 L47 26 L-7 26 L-7 -7 Z"
           id="path3404" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath14">
        <path
           d="M0 0 L36 0 L36 15 L0 15 L0 0 Z"
           id="path3407" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath15">
        <path
           d="M-7 -7 L49 -7 L49 26 L-7 26 L-7 -7 Z"
           id="path3410" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath16">
        <path
           d="M0 0 L38 0 L38 15 L0 15 L0 0 Z"
           id="path3413" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath17">
        <path
           d="M0 0 L171 0 L171 52 L0 52 L0 0 Z"
           id="path3416" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath18">
        <path
           d="M0 0 L162 0 L162 112 L0 112 L0 0 Z"
           id="path3419" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath19">
        <path
           d="M-77 -15 L154 -15 L154 30 L-77 30 L-77 -15 Z"
           id="path3422" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath20">
        <path
           d="M-92 -15 L184 -15 L184 30 L-92 30 L-92 -15 Z"
           id="path3425" />
      </clipPath>
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath21">
        <path
           d="M-57 -15 L114 -15 L114 30 L-57 30 L-57 -15 Z"
           id="path3428" />
      </clipPath>
    </defs>
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer1"
     inkscape:label="UML"
     style="display:none">
    <g
       text-rendering="geometricPrecision"
       id="g3430"
       style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-opacity:1">
      <rect
         x="0"
         width="466"
         height="151"
         y="0"
         id="rect3432"
         style="stroke:none" />
    </g>
    <g
       font-size="11"
       transform="translate(332,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3434"
       style="font-size:11px;font-weight:bold;fill:url(#linearGradient1);fill-opacity:1;stroke:url(#linearGradient1);stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="130"
         height="100"
         y="0"
         clip-path="url(#clipPath1)"
         id="rect3436"
         style="stroke:none" />
    </g>
    <g
       font-size="11"
       transform="translate(332,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       stroke-miterlimit="0"
       id="g3438"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="130"
         height="100"
         y="0"
         clip-path="url(#clipPath1)"
         id="rect3440"
         style="fill:none" />
      <line
         y2="15"
         x1="0"
         clip-path="url(#clipPath1)"
         x2="130"
         y1="15"
         id="line3442"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(332,17)"
       text-rendering="geometricPrecision"
       id="g3444"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="2"
         xml:space="preserve"
         y="14"
         clip-path="url(#clipPath2)"
         id="text3446"
         style="stroke:none"> :name : xsd:string</text>
    </g>
    <g
       font-size="11"
       transform="translate(332,17)"
       text-rendering="geometricPrecision"
       id="g3448"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <!--
<text x="2" xml:space="preserve" y="29" clip-path="url(#clipPath2)" stroke="none"
      > :givenName : xsd:string</text
      ><text x="2" xml:space="preserve" y="44" clip-path="url(#clipPath2)" stroke="none"
      > :familyName : xsd:string</text
      >
-->
      <text
         x="2"
         xml:space="preserve"
         y="59"
         clip-path="url(#clipPath2)"
         id="text3450"
         style="stroke:none"> :mbox : AnyURI</text>
    </g>
    <g
       font-size="11"
       transform="translate(332,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3452"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="50"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath3)"
         id="text3454"
         style="stroke:none">:User</text>
    </g>
    <g
       font-size="11"
       transform="translate(42,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3456"
       style="font-size:11px;font-weight:bold;fill:url(#linearGradient2);fill-opacity:1;stroke:url(#linearGradient2);stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="170"
         height="100"
         y="0"
         clip-path="url(#clipPath4)"
         id="rect3458"
         style="stroke:none" />
    </g>
    <g
       font-size="11"
       transform="translate(42,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       stroke-miterlimit="0"
       id="g3460"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;font-family:sans-serif">
      <rect
         x="0"
         width="170"
         height="100"
         y="0"
         clip-path="url(#clipPath4)"
         id="rect3462"
         style="fill:none" />
      <line
         y2="15"
         x1="0"
         clip-path="url(#clipPath4)"
         x2="170"
         y1="15"
         id="line3464"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(42,17)"
       text-rendering="geometricPrecision"
       id="g3466"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="2"
         xml:space="preserve"
         y="14"
         clip-path="url(#clipPath5)"
         id="text3468"
         style="stroke:none"> :status = Assigned|Unassigned</text>
    </g>
    <g
       font-size="11"
       transform="translate(42,17)"
       text-rendering="geometricPrecision"
       id="g3470"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="2"
         xml:space="preserve"
         y="29"
         clip-path="url(#clipPath5)"
         id="text3472"
         style="stroke:none"> :reportedOn : xsd:dateTime</text>
      <!-- 
<text x="2" xml:space="preserve" y="44" clip-path="url(#clipPath5)" stroke="none"
      > :assignedOn : xsd:dateTime?</text
    >
-->
    </g>
    <g
       font-size="11"
       transform="translate(42,2)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g3474"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="69"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath6)"
         id="text3476"
         style="stroke:none">:Issue</text>
    </g>
    <g
       font-size="11"
       transform="translate(212,62)"
       text-rendering="geometricPrecision"
       id="g3478"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath8)"
         id="text3480"
         style="stroke:none">0..*</text>
    </g>
    <g
       font-size="11"
       transform="translate(302,62)"
       text-rendering="geometricPrecision"
       id="g3482"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath10)"
         id="text3484"
         style="stroke:none">0..1</text>
    </g>
    <g
       font-size="11"
       transform="translate(312,22)"
       text-rendering="geometricPrecision"
       id="g3486"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath12)"
         id="text3488"
         style="stroke:none">1</text>
    </g>
    <g
       font-size="11"
       transform="translate(212,22)"
       text-rendering="geometricPrecision"
       id="g3490"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath8)"
         id="text3492"
         style="stroke:none">0..*</text>
    </g>
    <g
       font-size="11"
       transform="translate(122,102)"
       text-rendering="geometricPrecision"
       id="g3494"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="9"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath14)"
         id="text3496"
         style="stroke:none">0..*</text>
    </g>
    <g
       font-size="11"
       transform="translate(2,52)"
       text-rendering="geometricPrecision"
       id="g3498"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath16)"
         id="text3500"
         style="stroke:none">0..1</text>
    </g>
    <g
       font-size="11"
       transform="translate(188,18)"
       text-rendering="geometricPrecision"
       id="g3502"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;font-family:sans-serif">
      <line
         y2="24"
         x1="143"
         clip-path="url(#clipPath17)"
         x2="24"
         y1="24"
         id="line3504"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(189,58)"
       text-rendering="geometricPrecision"
       id="g3506"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;font-family:sans-serif">
      <line
         y2="24"
         x1="24"
         clip-path="url(#clipPath17)"
         x2="143"
         y1="24"
         id="line3508"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(-12,48)"
       text-rendering="geometricPrecision"
       id="g3510"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;font-family:sans-serif">
      <line
         y2="84"
         x1="134"
         clip-path="url(#clipPath18)"
         x2="134"
         y1="55"
         id="line3512"
         style="fill:none" />
      <line
         y2="84"
         x1="134"
         clip-path="url(#clipPath18)"
         x2="24"
         y1="84"
         id="line3514"
         style="fill:none" />
      <line
         y2="24"
         x1="24"
         clip-path="url(#clipPath18)"
         x2="24"
         y1="84"
         id="line3516"
         style="fill:none" />
      <line
         y2="24"
         x1="24"
         clip-path="url(#clipPath18)"
         x2="53"
         y1="24"
         id="line3518"
         style="fill:none" />
    </g>
    <g
       font-size="11"
       transform="translate(232,42)"
       text-rendering="geometricPrecision"
       id="g3520"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath19)"
         id="text3522"
         style="stroke:none">:reportedBy</text>
    </g>
    <g
       font-size="11"
       transform="translate(222,82)"
       text-rendering="geometricPrecision"
       id="g3524"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath20)"
         id="text3526"
         style="stroke:none">:reproducedBy</text>
    </g>
    <g
       font-size="11"
       transform="translate(22,132)"
       text-rendering="geometricPrecision"
       id="g3528"
       style="font-size:11px;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="10"
         xml:space="preserve"
         y="12"
         clip-path="url(#clipPath21)"
         id="text3530"
         style="stroke:none">:related</text>
    </g>
    <g
       text-rendering="geometricPrecision"
       font-size="10"
       id="g3532"
       style="font-size:10px;fill:#787878;fill-opacity:1;stroke:#787878;stroke-opacity:1" />
  </g>
  <g
     inkscape:groupmode="layer"
     id="layer2"
     inkscape:label="Example"
     style="display:inline">
    <g
       font-size="11"
       transform="translate(-56.889536,21.96221)"
       text-rendering="geometricPrecision"
       font-weight="bold"
       id="g4526"
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif">
      <text
         x="69"
         xml:space="preserve"
         y="12"
         id="text4528"
         style="stroke:none">some:Issue</text>
    </g>
    <path
       sodipodi:type="arc"
       style="fill:none;stroke:#000000;stroke-opacity:1"
       id="ex1_Issue"
       sodipodi:cx="114.80669"
       sodipodi:cy="29.75872"
       sodipodi:rx="94.486916"
       sodipodi:ry="34.543606"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       transform="matrix(0.48286072,0,0,0.54625635,-7.3455226,14.838586)" />
    <path
       transform="matrix(0.44712027,0,0,0.54653493,213.37109,14.830296)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_User"
       style="fill:none;stroke:#000000;stroke-opacity:1"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif"
       id="g4532"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(163.11046,21.96221)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4534"
         y="12"
         xml:space="preserve"
         x="69">some:User</text>
    </g>
    <path
       transform="matrix(0.62228098,0,0,0.54525881,170.58275,69.120974)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_Employee"
       style="fill:none;stroke:#000000;stroke-opacity:1"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;font-family:sans-serif"
       id="g4538"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(123.83726,76.214912)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4540"
         y="12"
         xml:space="preserve"
         x="69">some:Employee</text>
    </g>
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend)"
       d="M 88.052326,21.630814 142.9157,14.180232"
       id="ex1_state_p"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none"
       x="129.22105"
       y="24.197662"
       id="text6638"
       sodipodi:linespacing="125%"
       transform="matrix(0.99525641,-0.09728658,0.09728658,0.99525641,0,0)"><tspan
         sodipodi:role="line"
         id="tspan6640"
         x="129.22105"
         y="24.197662">ex:state</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;font-family:Impact;-inkscape-font-specification:Sans"
       x="151.04359"
       y="12.148256"
       id="text6770"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6772"></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Impact;-inkscape-font-specification:Sans"
       x="148.3343"
       y="20.953487"
       id="text6774"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6776"></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#C83500;fill-opacity:1;stroke:none;font-family:Impact;-inkscape-font-specification:Sans"
       x="145.625"
       y="14.180232"
       id="text6778"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780"
         x="145.625"
         y="14.180232">ex:assigned</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend)"
       d="M 93.47093,31.113372 222.12171,29.64251"
       id="path6782"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="197.7518"
       y="30.791992"
       id="text6638-2"
       sodipodi:linespacing="125%"
       transform="matrix(0.99964189,-0.02676001,0.02676001,0.99964189,0,0)"
       inkscape:transform-center-x="-12.452479"><tspan
         sodipodi:role="line"
         id="tspan6640-4"
         x="197.7518"
         y="30.791992">ex:submittedBy</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend)"
       d="M 91.477829,37.251391 192.53449,74.608829"
       id="path7005"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="197.05046"
       y="0.80997449"
       id="text6638-2-3"
       sodipodi:linespacing="125%"
       transform="matrix(0.93991687,0.3414034,-0.3414034,0.93991687,0,0)"
       inkscape:transform-center-x="-11.239559"
       inkscape:transform-center-y="6.2266342"><tspan
         sodipodi:role="line"
         id="tspan6640-4-9"
         x="197.05046"
         y="0.80997449">ex:reproducedBy</tspan></text>
    <path
       transform="matrix(0.50272101,0,0,0.54610605,359.65638,22.934707)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_User-2"
       style="fill:none;stroke:#000000;stroke-opacity:1;display:inline"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;display:inline;font-family:sans-serif"
       id="g4532-9"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(314.34227,30.053858)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4534-9"
         y="12.478942"
         xml:space="preserve"
         x="58.463287">mailto:bob@...</text>
    </g>
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend);display:inline"
       d="m 301.46229,20.875275 54.86338,-7.450582"
       id="ex1_state_p-0"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="341.69205"
       y="44.207619"
       id="text6638-1"
       sodipodi:linespacing="125%"
       transform="matrix(0.99525641,-0.09728658,0.09728658,0.99525641,0,0)"><tspan
         sodipodi:role="line"
         id="tspan6640-44"
         x="341.69205"
         y="44.207619">foaf:name</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;display:inline;font-family:Impact;-inkscape-font-specification:Sans"
       x="359.03497"
       y="13.424692"
       id="text6778-6"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780-5"
         x="359.03497"
         y="13.424692">Bob Smith</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend);display:inline"
       d="m 306.8809,30.357833 61.12002,11.460559"
       id="path6782-3"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="368.17676"
       y="-18.619452"
       id="text6638-2-9"
       sodipodi:linespacing="125%"
       transform="matrix(0.98834834,0.15220895,-0.15220895,0.98834834,0,0)"
       inkscape:transform-center-x="-12.122235"
       inkscape:transform-center-y="2.0477642"><tspan
         sodipodi:role="line"
         id="tspan6640-4-1"
         x="368.17676"
         y="-18.619452">foaf:mbox</tspan></text>
    <rect
       style="fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect7302"
       width="47.415211"
       height="15.80507"
       x="356.81143"
       y="2.0491898" />
    <path
       transform="matrix(0.50272101,0,0,0.54610605,358.07589,113.95686)"
       d="m 209.2936,29.75872 a 94.486916,34.543606 0 1 1 -188.973829,0 94.486916,34.543606 0 1 1 188.973829,0 z"
       sodipodi:ry="34.543606"
       sodipodi:rx="94.486916"
       sodipodi:cy="29.75872"
       sodipodi:cx="114.80669"
       id="ex1_User-2-3"
       style="fill:none;stroke:#000000;stroke-opacity:1;display:inline"
       sodipodi:type="arc" />
    <g
       style="font-size:11px;font-weight:bold;fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;display:inline;font-family:sans-serif"
       id="g4532-9-1"
       font-weight="bold"
       text-rendering="geometricPrecision"
       transform="translate(312.76178,121.07601)"
       font-size="11">
      <text
         style="stroke:none"
         id="text4534-9-4"
         y="12.478942"
         xml:space="preserve"
         x="58.463287">mailto:joe@...</text>
    </g>
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend);display:inline"
       d="m 295.65556,77.160936 120.5981,-8.288729"
       id="ex1_state_p-0-9"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="367.66379"
       y="102.81908"
       id="text6638-1-0"
       sodipodi:linespacing="125%"
       transform="matrix(0.99525641,-0.09728658,0.09728658,0.99525641,0,0)"><tspan
         sodipodi:role="line"
         id="tspan6640-44-1"
         x="367.66379"
         y="102.81908">foaf:givenName</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;display:inline;font-family:Impact;-inkscape-font-specification:Sans"
       x="419.22824"
       y="71.71035"
       id="text6778-6-7"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780-5-9"
         x="419.22824"
         y="71.71035">Joe</tspan></text>
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#Arrow2Mend);display:inline"
       d="M 297.24264,91.432909 367.94149,126.3616"
       id="path6782-3-8"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="375.06934"
       y="-50.142578"
       id="text6638-2-9-2"
       sodipodi:linespacing="125%"
       transform="matrix(0.89968487,0.43653997,-0.43653997,0.89968487,0,0)"
       inkscape:transform-center-x="-10.671641"
       inkscape:transform-center-y="5.5748169"><tspan
         sodipodi:role="line"
         id="tspan6640-4-1-8"
         x="375.06934"
         y="-50.142578">foaf:mbox</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;display:inline"
       id="rect7302-7"
       width="19.157673"
       height="15.805073"
       x="417.0047"
       y="60.33485" />
    <path
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow1Lend);display:inline"
       d="m 300.92627,86.134992 134.48741,7.396605"
       id="ex1_state_p-0-9-2"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cc" />
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:end;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;display:inline"
       x="423.10577"
       y="71.987328"
       id="text6638-1-0-0"
       sodipodi:linespacing="125%"
       transform="matrix(0.99914114,0.04143658,-0.04143658,0.99914114,0,0)"
       inkscape:transform-center-x="9.5788302"
       inkscape:transform-center-y="2.8736491"><tspan
         sodipodi:role="line"
         id="tspan6640-44-1-6"
         x="423.10577"
         y="71.987328">foaf:familyName</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:10px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;display:inline;font-family:Impact;-inkscape-font-specification:Sans"
       x="439.22638"
       y="95.05265"
       id="text6778-6-7-8"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan6780-5-9-7"
         x="439.22638"
         y="95.05265">Jones</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linejoin:round;stroke-miterlimit:0;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;display:inline"
       id="rect7302-7-1"
       width="29.454897"
       height="14.248512"
       x="436.1647"
       y="84.15609"
       ry="0" />
  </g>
</svg>

      <section id="nodeConstraints">
        <h2>Node Constraints</h2>
        <div class="namespace">
        <p>
          The following node constraints can be used alone, or in combination.
        </p>
        <dl>
          <dt id="vocab-literal-datatype" class="new">literal datatype</dt> <dd>A node constraint that identifies the datatype of an RDF literal.
          <pre class="schema shexc table"><span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>Â <span class="keyword lookit object"><span class="type">xsd:</span><span class="constant">string</span></span>
}</pre>
          <pre class="schema json table">{ "my:UserShape": { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", "predicate": "foaf:name",
    "value": { "type": "NodeConstraint", <span class="keyword new lookit">"datatype": "xsd:string"</span> } } } }</pre>

          </dd>
          <dt id="vocab-literal-facets" class="new">literal facet</dt> <dd>A node constraint that applies <a href="http://www.w3.org/TR/xmlschema-2/#rf-facets">XML Schema constraining facets</a>, including <span class="new">numeric facets</span>, which apply only to numeric RDF literals (<code class="keyword">MinInclusive</code>, <code class="keyword">MinExclusive</code>, <code class="keyword">MaxInclusive</code>, <code class="keyword">MaxExclusive</code>, <code class="keyword">TotalDigits</code>, <code class="keyword">FractionDigits</code>) and <span class="new">string facets</span>, which apply to all RDF literals (<code class="keyword">Length</code>, <code class="keyword">MinLength</code>, <code class="keyword">MaxLength</code>, <code class="keyword">Pattern</code>).  In the ShExC syntax, facet names are not case-sensitive.

          <pre class="schema shexc table"><span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">shoeSize</span></span>Â <span class="object">xsd:float <span class="lookit"><span class="keyword">MinInclusive</span> 5.5 <span class="keyword">maxInclusive</span> 12.5</span></span>
}</pre>
          <pre class="schema json table">{ "my:UserShape": { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:shoeSize",
    "value": { "type": "NodeConstraint", "datatype": "http://www.w3.org/2001/XMLSchema#float",
               <span class="keyword new lookit">"mininclusive": 5.5, "maxinclusive": 12.5</span> } } } }</pre>

          </dd>
          <dt id="vocab-node-kind" class="new">node kind</dt> <dd>A node constraint that specifies whether an RDF data node is of kind <code class="keyword">Literal</code>, <code class="keyword">IRI</code>, <code class="keyword">BNode</code>, or <code class="keyword">NonLiteral</code>, a union of the kinds <code class="keyword">IRI</code> and <code class="keyword">BNode</code>.  In the ShExC syntax, node kinds are not case-sensitive.
          <pre class="schema shexc table"><span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>Â <span class="keyword lookit object">IRI</span>
}</pre>
          <pre class="schema json table">{ "my:UserShape": { "type": "Shape",
  "expression": {
    "type": "TripleConstraint", "predicate": "foaf:mbox",
    "value": { "type": "NodeConstraint", <span class="keyword new lookit">"nodeKind": "IRI"</span> } } } }</pre>

          </dd>
          <dt id="vocab-value-set2" class="new">value set</dt> <dd>Enumerates a set of specific expected values.
          <pre class="schema shexc table"><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>Â <span class="lookit object">[<span class="type">ex:</span><span class="constant">unassigned</span> <span class="type">ex:</span><span class="constant">assigned</span>]</span>
}</pre>
          <pre class="schema json table">
{ "my:IssueShape": { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="keyword new lookit">[ "ex:unassigned", "ex:assigned" ]</span> } } } }</pre>
          </dd>
          <dt id="value-shape" class="new">value shape</dt> <dd>Asserts that the object is described by another shape, e.g.
          <pre class="schema shexc table"><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>Â <span class="lookit object"><span class="keyword">@</span><span class="shape-name">my:UserShape</span></span>
}</pre>
          <pre class="schema json">{ "my:IssueShape": { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:reportedBy",
      "value": { "type": "ShapeRef", <span class="keyword new lookit">"reference": "my:PersonShape"</span> } } } }</pre>
          </dd>
        </dl>

        </div>
      </section>

      <section id="tripleConstraints">
        <h2>Triple Constraints</h2>
        <p>
          Triple constraints are evaluated against all of the triples in an RDF graph that touch a given data node.  
          The RDF data node examined during validation is called the <span class="new">focus node</span>.
          Triple constraints typically identify a predicate and describe matching triples as having the focus node as the subject in a triple with the given predicate.
          (The exception is the inverse triple constraint, which describes matching triples as having the focus node as the object.)
          Triple constraints may specify how many matching triples are required and what kinds of objects are expected.
        </p>
        <div class="namespace">
        <p>
          The following simple example has one shape, <span class="shape-name usershape lowlight2 top bot">my:UserShape</span>, with a single triple constraint on the property <span class="foaf-name lowlight2 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span></span>.
          A value constraint within the triple constraint says that the object of a <span class="foaf-name lowlight2 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span></span> triple must be an RDF literal with a datatype of <span class="xsd-string lowlight2 top bot object"><span class="type">xsd:</span><span class="constant">string</span></span>.
          A conforming node in an RDF data graph will have exactly one such triple.
        </p>

        <div class="example wrapper">
          <!-- ShExC example -->
          <pre id="schema-triple-constraints" class="schema shexc">
<span class="prefixes" style="display:none"><span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>

</span><span class="shape-name usershape lowlight2 top bot">my:UserShape</span> {
  <span class="foaf-name lowlight2 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span></span> <span class="xsd-string lowlight2 top bot object"><span class="type">xsd:</span><span class="constant">string</span></span>
}</pre>
          <!-- JSON example -->
          <pre class="schema json">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#UserShape",
      "type": "Shape",
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://xmlns.com/foaf/0.1/name",
        "valueExpr": {
          "type": "NodeConstraint",
          "datatype": "http://www.w3.org/2001/XMLSchema#string" } } }
  ] }
</pre>

          <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>

</span><span class="user1 lowlight1 top"><span class="fullURL">inst:User1</span>                              </span>
<span class="user1 lowlight1 bot">    <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>  <span class="string top bot object">"Bob Smith"^^xsd:string</span> .</span>

<span class="user2 lowlight1 top"><span class="fullURL">inst:User2</span>                              </span>
<span class="user2 lowlight1 bot">    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>  <span class="string top bot object">"Bob Smith"</span></span> .            </span>
<a class="tryit" href="" data-shape-map="inst:User1@&lt;http://my.example/#UserShape&gt;,inst:User2@&lt;http://my.example/#UserShape&gt;">try it</a></pre>

          <pre class="instance turtle fail tryable">
<span class="prefixes" style="display:none"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>

</span><span class="user3 lowlight1 top"><span class="fullURL">inst:User3</span>                              </span>
<span class="user3 lowlight1    ">    <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>  <span class="string top bot object">"Joe Jones"^^xsd:string</span> ;</span>
<span class="user3 lowlight1 bot">    <span class="errorSite"><span class="predicate">foaf:name</span>  <span class="object">"J. Jones"^^xsd:string</span></span> . </span>

<span class="user4 lowlight1 top"><span class="fullURL">inst:User4</span>                              </span>
<span class="user4 lowlight1 bot">    <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>  <span class="string top bot object">"Bob Smith"^^<span class="xsd-anyURI lowlight2 top bot errorSite">xsd:anyURI</span></span> .</span>
<a class="tryit" href="" data-shape-map="inst:User3@&lt;http://my.example/#UserShape&gt;,inst:User4@&lt;http://my.example/#UserShape&gt;">try it</a></pre>

          </div>
          <div style="clear:both;"> </div>
          <table class="example results">
            <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
            <tr class="pass user1 top lowlight1"><td>inst:User1</td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
            <tr class="pass user2     lowlight1"><td>inst:User2</td><td>my:UserShape</td><td>pass</td><td>Literals in Turtle have a default datatype of <span class="xsd-string lowlight2 top bot object"><span class="type">xsd:</span><span class="constant">string</span></span>.</td></tr>
            <tr class="fail user3     lowlight1"><td>inst:User3</td><td>my:UserShape</td><td>fail</td><td class="fail">Expected exactly one <span class="foaf-name lowlight2 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span></span> arc.</td></tr>
            <tr class="fail user4 bot lowlight1"><td>inst:User4</td><td>my:UserShape</td><td>fail</td><td class="fail">Expected an <span class="xsd-string lowlight2 top bot object"><span class="type">xsd:</span><span class="constant">string</span></span>, not a <span class="xsd-anyURI lowlight2 top bot object"><span class="type">xsd:</span><span class="constant">anyURI</span></span>.</td></tr>
          </tbody></table>          

          <p>
            The following regular expression conventions are used to specify cardinalities other than the default of "exactly one" (see the <a href="#simple-expressions-example-1">example in Quick Start</a>, with cardinality "one or two").
          </p>
          <ul>
            <li>"<span class="new">+</span>" - one or more</li>
            <li>"<span class="new">*</span>" - zero or more</li>
            <li>"<span class="new">?</span>" - zero or one</li>
            <li>"<span class="new">{m}</span>" - exactly m</li>
            <li>"<span class="new">{m,n}</span>" - at least m, no more than n</li>
          </ul>

        <script type="text/javascript">
        <!--
prepareHighlight(["usershape", "foaf-name", "xsd-string", "xsd-anyURI"], "highlight2", "lowlight2");
prepareHighlight(["user1", "user2", "user3", "user4"], "highlight1", "lowlight1");
        -->
        </script>
      </div>
      </section>

      <section id="simple-expressions">
        <h2>Grouping Triple Constraints in Shapes</h2>
        <div class="namespace">
        <p>
          The examples above show just one triple constraint per shape but in practice, most shape declarations will include multiple constraints.
          In the ShExC syntax, triple constraints are separated by a semi-colon.
          In the following example, the shape <span class="shape-name">my:IssueShape</span> will match:
        </p>
      <ul>
        <li class="state lowlight1 top bot">exactly one data triple with predicate <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> and a value in the value set <span class="stateValue lowlight2 top bot "><span class="object">ex:unassigned</span> or <span class="object">ex:assigned</span></span>,</li>
        <li class="reportedBy lowlight1 top bot">exactly one data triple with predicate <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> and a value matching the shape labeled <span class="user lowlight2 top bot object">my:UserShape</span>.</li>
      </ul>
      <p>
        The shape labeled <span class="user lowlight2 top bot object">my:UserShape</span> must have:
      </p>
      <ul>
        <li class="name lowlight1 top bot">exactly one triple constraint on predicate <span id="name" class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> with a value of the literal datatype <span class="string lowlight2 top bot"><span class="object">xsd:string</span></span></li>
        <li class="mbox lowlight1 top bot"><span class="oneOrMore lowlight2 top bot" id="oneOrMore">one or more</span> triple constraints on predicate <span id="mbox" class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> with a <code>node kind</code> of <span class="IRI lowlight2 top bot object" id="IRI">IRI</span>.</li>
      </ul>

        <div id="grouping-example-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>

</span><span class="shape-name hilight-shapeName lowlight2 top bot">my:IssueShape</span> {
  <span class="state      lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="stateValue lowlight2 top bot object">ex:unassigned ex:assigned</span>]</span>;
  <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> <span class="object">@</span><span class="user lowlight2 top bot shape-name object">my:UserShape</span></span>
}

<span class="user lowlight2 top bot shape-name">my:UserShape</span> {
  <span class="name       lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="string lowlight2 top bot object">xsd:string</span></span>;
  <span class="mbox       lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="IRI lowlight2 top bot object">IRI</span><span class="oneOrMore lowlight2 top bot">+</span></span>
}
</pre>

          <!-- JSON example -->
          <pre class="schema json">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#IssueShape",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#state",
            "valueExpr": {
              "type": "NodeConstraint",
              "values": [
                "http://ex.example/#unassigned",
                "http://ex.example/#assigned"
              ] } },
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#reportedBy",
            "valueExpr": "http://my.example/#UserShape" }
        ] } },
    { "id": "http://my.example/#UserShape",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "TripleConstraint",
            "predicate": "http://xmlns.com/foaf/0.1/name",
            "valueExpr": {
              "type": "NodeConstraint",
              "datatype": "http://www.w3.org/2001/XMLSchema#string" } },
          { "type": "TripleConstraint",
            "predicate": "http://xmlns.com/foaf/0.1/mbox",
            "min": 1, "max": "unbounded",
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "iri" } }
        ] } }
  ] }
</pre>
          <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="fullURL">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="stateValue lowlight2 top bot"><span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span></span> ;
    <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>   <span class="user lowlight2 top bot"><span class="fullURL object">inst:User2</span></span></span> .

<span class="user lowlight2 top bot"><span class="fullURL">inst:User2</span></span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot object">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 top object"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span></span></span> ;
    <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 bot object"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> </span></span>.
<a class="tryit" href="" data-shape-map="inst:Issue1@&lt;http://my.example/#IssueShape&gt;,inst:User2@&lt;http://my.example/#UserShape&gt;">try it</a></pre>
          <pre class="instance turtle fail tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="fullURL">inst:Issue3</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="stateValue lowlight2 top bot errorSite object">ex:unsinged</span></span> ; <span class="comment"># &lt;-- typo</span>
    <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>   <span class="user lowlight2 top bot"><span class="fullURL object">inst:User4</span></span></span> .

<span class="user lowlight2 top bot"><span class="fullURL">inst:User4</span></span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot object">"Bob Smith"</span>, <span class="string top bot errorSite object">"Robert Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 top object"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span></span></span> ;
    <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 bot object"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> </span></span>.
<a class="tryit" href="" data-shape-map="inst:Issue3@&lt;http://my.example/#IssueShape&gt;,inst:User4@&lt;http://my.example/#UserShape&gt;">try it</a></pre>
      </div>
          <div style="clear:both;"></div>
      <table class="example results">
        <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
        <tr class="pass"><td>inst:Issue1</td><td>my:IssueShape</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="pass"><td>inst:User2 </td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="fail"><td>inst:Issue3</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="object"><span class="type">ex:</span><span class="constant">unsinged</span></span> not in range of <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>.</td></tr>
        <tr class="fail"><td>inst:User4 </td><td>my:UserShape</td><td>fail</td><td class="fail">Max cardinality of <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> exceeded.</td></tr>
      </tbody></table>
      <script type="text/javascript">
      <!--
prepareHighlight(["oneOrMore", "IRI", "stateValue", "user", "string"], "highlight2", "lowlight2");
prepareHighlight(["state", "reportedBy", "name", "mbox"], "highlight1", "lowlight1");
      -->
      </script>
      </div>

      <p id="empty-shape">
        Note that a shape composed of triple expressions with a minimum cardinality of zero will trivially match any RDF node that does not have outgoing arcs.
      </p>
      <div class="namespace">
        <div class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" id="issue-user-allOpt" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span> <span class="object"><span class="type">ex:</span><span class="constant">assigned</span></span>];
  <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> @<span class="shape-name object">my:UserShape</span>
}

<span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="keyword">LITERAL<span class="lookit">?</span></span></span>;
  <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="object"><span class="keyword">IRI<span class="lookit">*</span></span></span>
}
</pre>
          <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>

</span><span class="fullURL">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ;
    <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span> ;
    <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>   <span class="string object">"Bob Smith"</span> .
<a class="tryit" href="" data-shape-map="inst:Issue1@my:IssueShape,'Bob Smith'@&lt;http://my.example/#UserShape&gt;">try it</a></pre>
        </div>
        <div style="clear:both;"></div>

        <table class="example results">
          <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th></tr>
          <tr class="pass"><td>inst:Issue1</td><td>my:IssueShape</td><td>pass</td></tr>
          <tr class="pass"><td>"Bob Smith" </td><td>my:UserShape</td><td>pass</td></tr>
        </tbody></table>
      </div>
      <p>
        For both properties in <span class="shape-name">my:UserShape</span>, the minimum number of triples is zero.
        Any RDF data node will match this shape as long as it does not have conflicting <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> or <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> properties.
        Since no RDF literal may be the subject of RDF triples, any literal would satisfy this shape.  This can lead to unintended results and confusing errors.
      </p>
    </section>

      <section id="combined-constraints">
        <h3>Combining Value Constraints</h3>
        <div class="namespace">
          <p>
            Value constraints can be combined, for example to say that an issue conforms to a given shape and is identified by an IRI matching a certain pattern.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre id="example-combined1" class="schema shexc" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="object">ex:accepted ex:resolved</span>];
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:EmployeeShape</span></span>
}

<span class="shape-name">my:EmployeeShape</span> <span class="keyword">IRI</span>                      
 <span class="hilight-reproducedBy lowlight2 top bot">/<span class="string">^http:\/\/hr.example\/id#[0-9]+</span>/</span> {      
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="keyword object">LITERAL</span>;                      
  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> [<span class="object">ex:ProgrammingDepartment</span>]
}                                         
</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#IssueShape",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#state",
            "valueExpr": {
              "type": "NodeConstraint",
              "values": [
                "http://ex.example/#accepted",
                "http://ex.example/#resolved"
              ]
            } },
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#reproducedBy",
            "valueExpr": "http://my.example/#EmployeeShape" }
        ] } },
    { "id": "http://my.example/#EmployeeShape",
      "type": "ShapeAnd",
      "shapeExprs": [
        { "type": "NodeConstraint",
          "nodeKind": "iri",
          "pattern": "^http://hr.example/id#[0-9]+" },
        { "type": "Shape",
          "expression": {
            "type": "EachOf",
            "expressions": [
              {
                "type": "TripleConstraint",
                "predicate": "http://xmlns.com/foaf/0.1/name",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "nodeKind": "literal" } },
              {
                "type": "TripleConstraint",
                "predicate": "http://ex.example/#department",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "values": [
                    "http://ex.example/#ProgrammingDepartment"
                  ] } }
            ] } }
      ] }
  ] }
</pre>
              <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>

</span><span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="fullURL object">&lt;http://hr.example/id#123&gt;</span> .

<span class="fullURL hilight-reproducedBy lowlight2 top bot">&lt;http://hr.example/id#123&gt;</span>                  
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="string top bot object">"Bob Smith"</span> ;                   
  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .  
<a class="tryit" href="" data-shape-map="inst:Issue1@&lt;http://my.example/#IssueShape&gt;,&lt;http://hr.example/id#123&gt;@&lt;http://my.example/#EmployeeShape&gt;">try it</a></pre>
              <pre class="instance turtle fail tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>

</span><span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="fullURL object">&lt;http://hr.example/id#abc&gt;</span> .

<span class="fullURL hilight-reproducedBy lowlight2 top bot">&lt;http://hr.example/id<span class="errorSite">#abc</span>&gt;</span>                  
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="string top bot object">"Bob Smith"</span> ;                   
  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .  
<a class="tryit" href="" data-shape-map="inst:Issue1@&lt;http://my.example/#IssueShape&gt;,&lt;http://hr.example/id#abc&gt;@&lt;http://my.example/#EmployeeShape&gt;">try it</a></pre>
            <div style="clear:both;"></div>
            <table class="example results">
              <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>inst:User1</td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="pass"><td>&lt;http://hr.example/id#123&gt;</td><td>my:EmployeeShape</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail hilight-component top lowlight2"><td>inst:User3</td><td>my:UserShape</td><td>fail</td><td class="fail">Object of <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> does not match <span class="shape-name">my:EmployeeShape</span>.</td></tr>
              <tr class="fail hilight-invComponent lowlight1 bot"><td>&lt;http://hr.example/id#abc&gt;</td><td>my:EmployeeShape</td><td>fail</td><td class="fail"><span class="fullURL">&lt;http://hr.example/id#abc&gt;</span> does not match regular expression.</td></tr>
            </tbody></table>
            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-reproducedBy", "hilight-assignedTo"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </div>
      </section>

      <section id="nested-shapes">
        <h3>Nesting Shapes</h3>
        <p>
          In the examples above, value expressions referenced shape expressions with the '@' symbol.
          It is also possible to write "anonymous" shapes directly in the value expression.
          In the example below, the value of the triple constraint on predicate <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> is a shape comprised of triples constraints on the predicates <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> and <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>.  
          In ShExC syntax, this anonymous shape is enclosed in curly brackets.
          In ShExJ, it is contained in the triple constraint's <span class="math">valueExpr</span> property.
        </p>
        <div class="namespace">
          <div id="nested-shapes-example-1" class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>

</span><span class="shape-name IssueShape lowlight2 top bot">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">unassigned</span> <span class="type">ex:</span><span class="constant">assigned</span>]</span>;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> <span class="curlies lowlight2 top bot">{</span>
    <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="keyword object">LITERAL</span>;
    <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="object"><span class="keyword">IRI</span><span class="keyword">+</span></span>
  <span class="curlies lowlight2 top bot">}</span>
}</pre>

          <!-- JSON example -->
            <pre class="schema json">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#IssueShape",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#state",
            "valueExpr": {
              "type": "NodeConstraint",
              "values": [
                "http://ex.example/#unassigned",
                "http://ex.example/#assigned"
              ] } },
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#reportedBy",
            "valueExpr": <span class="lookit">{</span>
              "type": "Shape",
              "expression": {
                "type": "EachOf",
                "expressions": [
                  { "type": "TripleConstraint",
                    "predicate": "http://xmlns.com/foaf/0.1/name",
                    "valueExpr": {
                      "type": "NodeConstraint",
                      "nodeKind": "literal" } },
                  {
                    "type": "TripleConstraint",
                    "predicate": "http://xmlns.com/foaf/0.1/mbox",
                    "min": 1,
                    "max": "unbounded",
                    "valueExpr": {
                      "type": "NodeConstraint",
                      "nodeKind": "iri" } }
                ] } <span class="lookit">}</span> }
        ] } }
  ] }
</pre>
          </div>
          <script type="text/javascript">
          <!--
    prepareHighlight(["bnode", "curlies", "IssueShape"], "highlight2", "lowlight2");
          -->
          </script>
        </div>
      </section>

    <section id="choices">
      <h2>Expressions with Choices</h2>
      <div class="namespace">
        <p>
          Most schema languages offer a way to express choices.
          In the following example, a user has <span class="eitherOr   lowlight2 top bot">either a simple name</span> (<span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span></span>), <span class="eitherOr   lowlight2 top bot">or a composite name</span> (<span class="fname lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">familyName</span></span></span> with one or more <span class="gname lowlight1 top bot table"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span></span>s).
          The user must have exactly one <span class="mbox lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>.
        </p>

        <div class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

</span><span class="shape-name">my:UserShape</span> {
  <span class="eitherOr   lowlight2 top">(                              </span>
     <span class="name       lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="keyword object">LITERAL</span></span>
  <span class="eitherOr   lowlight2 bot">                               </span>
  <span class="eitherOr   lowlight2 top">  |                            </span>
      <span class="gname      lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span> <span class="object"><span class="keyword">LITERAL</span>+</span></span>;
      <span class="fname      lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">familyName</span></span> <span class="keyword object">LITERAL</span></span>
  <span class="eitherOr   lowlight2 bot">);                             </span>
  <span class="mbox       lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="object">IRI</span></span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#UserShape",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "OneOf",
            "expressions": [
              { "type": "TripleConstraint",
                "predicate": "http://xmlns.com/foaf/0.1/name",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "nodeKind": "literal" } },
              { "type": "EachOf",
                "expressions": [
                  { "type": "TripleConstraint",
                    "predicate": "http://xmlns.com/foaf/0.1/givenName",
                    "min": 1, "max": "unbounded",
                    "valueExpr": {
                      "type": "NodeConstraint",
                      "nodeKind": "literal" } },
                  { "type": "TripleConstraint",
                    "predicate": "http://xmlns.com/foaf/0.1/familyName",
                    "valueExpr": {
                      "type": "NodeConstraint",
                      "nodeKind": "literal" } }
                ] }
            ] },
          { "type": "TripleConstraint",
            "predicate": "http://xmlns.com/foaf/0.1/mbox",
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "iri" } }
        ] } }
  ] }
</pre>
          <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="fullURL">inst:User1</span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot object">"Alice Walker"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:awalker@example.org&gt;</span></span> .

<span class="fullURL">inst:User2</span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="gname lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span>  <span class="string top bot object">"Robert"</span></span> ;
    <span class="gname lowlight1 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span>  <span class="string top bot object">"Paris"</span> </span>;
    <span class="fname lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">familyName</span></span> <span class="string top bot object">"Moses"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:rpmoses@example.org&gt;</span></span> .
<a class="tryit" href="" data-shape-map="inst:User1@&lt;http://my.example/#UserShape&gt;,inst:User2@&lt;http://my.example/#UserShape&gt;">try it</a></pre>
          <pre class="instance turtle fail tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="fullURL">inst:User3</span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="gname lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span>  <span class="string top bot object">"Smith"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bobs@example.org&gt;</span></span> .

<span class="fullURL">inst:User4</span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot object">"A"</span></span> ;
    <span class="gname lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span>  <span class="string top bot object">"B"</span></span> ;
    <span class="fname lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">familyName</span></span> <span class="string top bot object">"C"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bobs@example.org&gt;</span></span> .

<span class="fullURL">inst:User5</span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot object">"A"</span></span> ;
    <span class="gname lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span>  <span class="string top bot object">"B"</span></span> ;
    <span class="mbox lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bobs@example.org&gt;</span></span> .
<a class="tryit" href="" data-shape-map="inst:User3@&lt;http://my.example/#UserShape&gt;,inst:User4@&lt;http://my.example/#UserShape&gt;inst:User5@&lt;http://my.example/#UserShape&gt;">try it</a></pre>

          <div style="clear:both;"></div>
          <table class="example results">
            <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
            <tr class="pass"><td>inst:User1</td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
            <tr class="pass"><td>inst:User2</td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
            <tr class="fail hilight-component top lowlight2"><td>inst:User3</td><td>my:UserShape</td><td>fail</td><td class="fail">Expected a <span class="predicate"><span class="type">foaf:</span><span class="constant">familyName</span></span> arc.</td></tr>
            <tr class="fail hilight-invComponent lowlight1 bot"><td>inst:User4</td><td>my:UserShape</td><td>fail</td><td class="fail">Expected only one disjunction to pass.</td></tr>
            <tr class="fail hilight-component top lowlight2"><td>inst:User5</td><td>my:UserShape</td><td>fail</td><td class="fail">Extra <span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span> arc.</td></tr>
          </tbody></table>
      </div>
      <script type="text/javascript">
      <!--
prepareHighlight(['oneOrMore', 'eitherOr'], "highlight2", "lowlight2");
prepareHighlight(['name', 'gname', 'fname', 'mbox'], "highlight1", "lowlight1");
      -->
      </script>
      </div>
    </section>

    
      <section id="value-sets">
        <h2>Value Sets</h2>
        <p>
          A <span class="new">value set</span> is a value constraint for enumerating the set of permissible values for a property.
          The values can be IRIs, literals or language tags.
        </p>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>Â <span class="object new lookit">[ex:unassigned ex:assigned]</span>
}</pre>
        <pre class="schema json table">
{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="object new lookit">[ "ex:unassigned", "ex:assigned" ]</span> } } } }</pre>

        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>Â <span class="object new lookit">["unassigned" "assigned"]</span>
}</pre>
        <pre class="schema json table">
{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="object new lookit">[ "\"unassigned\'", "\"assigned\"" ]</span> } } } }</pre>

        <pre class="schema shexc table" style="float:left">
<span class="prefixes" style="display:none"><span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/users/&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">label</span></span>Â <span class="object new lookit">[@en @fr]</span>
}</pre>
        <pre class="schema json table">
{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "ex:status",
    "value": { "type": "NodeConstraint", "values": <span class="object new lookit">[ "\"unassigned\'", "\"assigned\"" ]</span> } } } }</pre>

        <div style="clear:both;"> </div>
        <p>
          Fixed values are represented as value sets with one member.
          For example, a required type triple can be expressed in the following two ways using the ShExC syntax:
        </p>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">rdf:</span><span class="constant">type</span></span>Â <span class="object new lookit">[foaf:Person]</span>
}</pre>
        <pre class="schema json table">{ <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
  "expression": { "type": "TripleConstraint", "predicate": "rdf:type",
    "value": { "type": "NodeConstraint", "values": [ <span class="object new lookit">"foaf:Person"</span> ] } } } }</pre>
        <pre class="schema shexc table" style="float:left"><span class="shape-name">my:UserShape</span> {
  <span class="keyword">a</span>Â <span class="object new lookit">[foaf:Person]</span>
}</pre>
        <div style="clear:both;"> </div>

        <div id="sec-iri-range">
          <div class="example wrapper">
            <p>
              A value set can also contain <span class="new">IRI</span>, <span class="new">string</span> and <span class="new">language tag</span> ranges.
              An IRI range can be defined as including all IRIs that start with a given base IRI by appending a tilde ("<code>~</code>").
            </p>

            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>   <span class="object">[ <span class="type">excodes:</span><span class="keyword">~</span> <span class="type">auxterms:</span><span class="keyword">~</span> ]</span>;
  <span class="predicate"><span class="type">ex:</span><span class="constant">mood</span></span>     <span class="object">[ <span class="">@en</span><span class="keyword">~</span> - <span class="">@en-fr</span> ]</span>;
 ^<span class="predicate"><span class="type">ex:</span><span class="constant">hasIssue</span></span> <span class="object">[ <span class="type">my:</span><span class="constant">Product1</span> <span class="type">my:</span><span class="constant">Product2</span> ]</span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#IssueShape",
      "type": "Shape",
      "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "TripleConstraint",
            "predicate": "http://a.example/#status",
            "valueExpr": {
              "type": "NodeConstraint",
              "values": [
                { "type": "IRIStemRange",
                  "stem": "http://a.example/codes#" },
                { "type": "IRIStemRange",
                  "stem": "http://aux.example/terms#" }
              ] } },
          { "type": "TripleConstraint",
            "predicate": "http://a.example/#mood",
            "valueExpr": {
              "type": "NodeConstraint",
              "values": [
                {
                  "type": "LanguageStemRange",
                  "stem": { "value": "en" },
                  "exclusions": [
                    { "value": "en-fr" }
                  ] }
              ] } },
          { "type": "TripleConstraint",
            "inverse": true,
            "predicate": "http://a.example/#hasIssue",
            "valueExpr": {
              "type": "NodeConstraint",
              "values": [
                "http://my.example/#Product1",
                "http://my.example/#Product2"
              ] } }
        ] } }
  ] }
</pre>
              <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="fullURL">inst:Issue1</span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>   <span class="object"><span class="type">excodes:</span><span class="constant">resolved</span></span> ;
            <span class="predicate"><span class="type">ex:</span><span class="constant">mood</span></span>     <span class="string object">"hungry"@en-gb</span> .
<span class="fullURL">my:Product2 <span class="predicate"><span class="type">ex:</span><span class="constant">hasIssue</span></span> <span class="fullURL object">inst:Issue1</span></span> .
<a class="tryit" href="" data-shape-map="inst:Issue1@&lt;http://my.example/#IssueShape&gt;">try it</a></pre>
              <pre class="instance turtle fail tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue2</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>   <span class="errorSite object">ex:done</span></span> ;
            <span class="predicate"><span class="type">ex:</span><span class="constant">mood</span></span>     <span class="string object errorSite">"angry"@en-fr</span> .
<span class="status lowlight1 top bot"><span class="fullURL">my:Product1 <span class="predicate"><span class="type">ex:</span><span class="constant">hasIssue</span></span> <span class="fullURL object">inst:Issue2</span></span></span> .

<span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue3</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="object"><span class="type">auxterms:</span><span class="constant">done</span></span></span>.
<span class="status lowlight1 top bot"><span class="fullURL errorSite">my:Product3 <span class="predicate"><span class="type">ex:</span><span class="constant">hasIssue</span></span> <span class="fullURL object">inst:Issue3</span></span></span> .
<a class="tryit" href="" data-shape-map="inst:Issue2@&lt;http://my.example/#IssueShape&gt;,inst:Issue3@&lt;http://my.example/#IssueShape&gt;">try it</a></pre>
            <div style="clear:both;"></div>
              <table class="example results">
                <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
                <tr class="pass user2 top lowlight1"><td>inst:Issue1</td><td>my:IssueShape</td><td>pass</td><td class="noreason"></td></tr>
                <tr class="fail user5 bot lowlight1"><td>inst:Issue2</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="done top bot lowlight2"><span class="object"><span class="type">ex:</span><span class="constant">done</span></span></span> not in range of <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>.<br/>Excluded language tag for <span class="predicate"><span class="type">ex:</span><span class="constant">mood</span></span>.</td></tr>
                <tr class="fail user5 bot lowlight1"><td>inst:Issue3</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="done top bot lowlight2"><span class="object"><span class="fullURL">my:Product3</span></span></span> not in range of <span class="predicate"><span class="type">ex:</span><span class="constant">hasIssue</span></span>.</td></tr>
              </tbody></table>
          </div>
        </div>

        <div id="sec-iri-range-exclusion" class="namespace">
          <div class="example wrapper">
            <p>
            An IRI range matches multiple IRIs, from which one may wish to exclude specific IRIs or IRI ranges.
            <span class="new">IRI range exclusions</span> are expressed by following an IRI range with: minus sign (<code>-</code>), whitespace, and a specific IRI, or IRI range, to be excluded from the IRI range.  An arbitrary number of IRIs, each prefixed with a minus sign and whitespace, can follow the first.
            </p>

            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span> <span class="object">[
      <span class="type">excodes:</span><span class="keyword">~</span> - <span class="type">excodes:</span><span class="constant">unassigned</span> - <span class="assigned top bot lowlight2"><span class="type">excodes:</span><span class="constant">assigned</span></span>
      <span class="type">auxterms:</span><span class="keyword">~</span> - <span class="med_ top bot lowlight2 fullURL">&lt;http://aux.example/terms#med_&gt;~</span>
  ]</span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#IssueShape",
      "type": "Shape",
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://a.example/#status",
        "valueExpr": {
          "type": "NodeConstraint",
          "values": [
            { "type": "StemRange",
              "stem": "http://a.example/codes#",
              "exclusions": [
                "http://a.example/codes#unassigned",
                "http://a.example/codes#assigned"
              ] },
            { "type": "StemRange",
              "stem": "http://aux.example/terms#",
              "exclusions": [
                { "type": "Stem",
                  "stem": "http://aux.example/terms#med_" }
              ] }
          ] } } }
  ] }
</pre>
              <pre class="instance turtle tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="user2 lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue2</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="object"><span class="type">excodes:</span><span class="constant">resolved</span></span></span> .
<span>                                         </span>
<span class="fail user3 status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue3</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="min lowlight2 top bot"><span class="assigned top bot errorSite object">excodes:assigned</span></span></span>.
<span>                                         </span>
<span class="fail user4 status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue4</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="min lowlight2 top bot"><span class="med_ top bot errorSite object">auxterms:med_sniffles</span></span></span>.
<span>                                         </span>
<span class="fail user5 status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue5</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="min lowlight2 top bot"><span class="done top bot errorSite object">ex:done</span></span></span>.
<a class="tryit" href="" data-shape-map="inst:Issue2@&lt;http://my.example/#IssueShape&gt;,inst:Issue3@&lt;http://my.example/#IssueShape&gt;,inst:Issue4@&lt;http://my.example/#IssueShape&gt;,inst:Issue5@&lt;http://my.example/#IssueShape&gt;">try it</a></pre>
            <div style="clear:both;"></div>
              <table class="example results">
                <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
                <tr class="pass user2 top"><td>inst:Issue2</td><td>my:IssueShape</td><td>pass</td><td class="noreason"></td></tr>
                <tr class="fail user3    "><td>inst:Issue3</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="assigned top bot lowlight2"><span class="object"><span class="type">excodes:</span><span class="constant">assigned</span></span></span> excluded.</td></tr>
                <tr class="fail user4    "><td>inst:Issue4</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="med_ top bot lowlight2"><span class="object"><span class="type">auxterms:</span><span class="constant">med_â€¦</span></span></span> terms excluded.</td></tr>
                <tr class="fail user5 bot"><td>inst:Issue5</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="done top bot lowlight2"><span class="object"><span class="type">ex:</span><span class="constant">done</span></span></span> not in range of <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>.</td></tr>
              </tbody></table>
            <script type="text/javascript">
            <!--
prepareHighlight(["user2", "user3", "user4", "user5"], "highlight1", "lowlight1");
prepareHighlight(["assigned", "med_", "done"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
          <div class="example wrapper">
            <p>
              A period (<code>.</code>) can be used with IRI exclusions to say that any IRI is permitted except the excluded IRIs.
            </p>

            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span> <span class="object">[
    <span class="keyword">.</span> - <span class="type">excodes:</span><span class="constant">bad</span>- - <span class="type">excodes:</span><span class="constant">assigned</span>
  ]</span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema",
  "shapes": [
    { "id": "http://my.example/#IssueShape",
      "type": "Shape",
      "expression": {
        "type": "TripleConstraint",
        "predicate": "http://a.example/#status",
        "valueExpr": {
          "type": "NodeConstraint",
          "values": [
            { "type": "StemRange",
              "stem": {
                "type": "Wildcard" },
              "exclusions": [
                "http://a.example/codes#bad-",
                "http://a.example/codes#assigned"
              ] }
          ] } } }
  ] }
</pre>
              <pre class="instance turtle pass tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue1</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="object"><span class="type">ex:</span><span class="constant">random</span></span></span> .
<a class="tryit" href="" data-shape-map="inst:Issue1@&lt;http://my.example/#IssueShape&gt;">try it</a></pre>
              <pre class="instance turtle fail tryable">
<span class="prefixes"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://a.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">excodes:</span> <span class="fullURL">&lt;http://a.example/codes#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">auxterms:</span> <span class="fullURL">&lt;http://aux.example/terms#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://inst.example/#&gt;</span>

</span><span class="status lowlight1 top bot"><span class="user lowlight2 top bot"><span class="fullURL">inst:Issue2</span></span> <span class="predicate"><span class="type">ex:</span><span class="constant">status</span></span>  <span class="min lowlight2 top bot"><span class="errorSite object">excodes:assigned</span></span></span>.
<a class="tryit" href="" data-shape-map="inst:Issue2@&lt;http://my.example/#IssueShape&gt;">try it</a></pre>
            <div style="clear:both;"></div>
            <table class="example results">
              <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>inst:Issue1</td><td>my:IssueShape</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail"><td>inst:Issue2</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="object"><span class="type">excodes:</span><span class="constant">assigned</span></span> is excluded.</td></tr>
            </tbody></table>
          </div>
        </div>
      </section>
  </section>

      <section id="advanced">
      <h2>Advanced Concepts</h2>
      <section id="inverse-properties">
        <h3>Inverse Triple Constraints</h3>
        <div class="namespace">
          <p>
            Placing a regular triple constraint on predicate <span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> into <span class="shape-name">my:UserShape</span> effectively requires all users to have reported an issue.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="prefixes" style="display:none"><span class="keyword">PREFIX</span> <span class="type">my:</span> <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>

</span><span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">unassigned</span> <span class="type">ex:</span><span class="constant">assigned</span>]</span>
}

<span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="keyword object">LITERAL</span>;
  <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="keyword object">IRI+</span>;
  <span class="reportedIssue lowlight1 top bot new"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> <span class="object">@<span class="shape-name">my:IssueShape</span></span></span>
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": {
    <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:state"</span></span>,                      
            <span class="object">"value": { "type": "NodeConstraint",              </span>
            <span class="object">  "values": [ "ex:unassigned", "ex:assigned" ]</span>
            <span class="object">}                                             </span>
          }
        ]
      }
    },
    <span class="shape-name">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,                     
            <span class="object">"value": {                </span>
            <span class="object">  "type": "NodeConstraint",   </span>
            <span class="object">  "datatype": "xsd:string"</span>
            <span class="object">}                         </span>
          },                                              
          { "type": "TripleConstraint",                   
            <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:mbox"</span></span>,                     
            <span class="object">"value": { "type": "NodeConstraint",</span>              
            <span class="object">  "nodeKind": "iri"             </span>              
            <span class="object">},                              </span>
            "min": 1, "max": "*"
          },                                              
          <span class="reportedIssue lowlight1 top">{ "type": "TripleConstraint",                      </span>
          <span class="reportedIssue lowlight1    ">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reportedIssue"</span></span>, <span class="inversePredicate top bot keyword lowlight2">"inverse": false</span>,</span>
          <span class="reportedIssue lowlight1    ">  <span class="object">"value": { "type": "ShapeRef",</span>                 </span>
          <span class="reportedIssue lowlight1    ">  <span class="object">  "reference": <span class="shape-name">"my:IssueShape"</span></span>                   </span>
          <span class="reportedIssue lowlight1    ">  <span class="object">}              </span>                                  </span>
          <span class="reportedIssue lowlight1 bot">}                                                  </span>
        ]
      }
    }
  }
}</pre>
            <pre class="instance turtle">
<span class="fullURL">inst:Issue1</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> .

<span class="fail inst-User6 lowlight2 top"><span class="fullURL">inst:User2</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span> ;                     </span>
<span class="fail inst-User6 lowlight2    ">    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot object">"Bob Smith"</span></span> ;              </span>
<span class="fail inst-User6 lowlight2    ">    <span class="mbox lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span></span> ; </span>
<span class="fail inst-User6 lowlight2 bot">    <span class="mbox lowlight1 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:rs@example.org&gt;</span> </span>.  </span>

<span class="fullURL">inst:User3</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string object">"Bob Smith"</span></span> ;
    <span class="reportedIssue lowlight1 top bot new"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> <span class="fullURL object">inst:Issue4</span></span> ;
    <span class="mbox lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span></span> ;
    <span class="mbox lowlight1 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:rs@example.org&gt;</span> </span>.</pre>
            <div style="clear:both;"></div>
            <table class="example results">
              <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>inst:Issue1</td><td>my:IssueShape</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail"><td>inst:User2</td><td>my:UserShape</td><td>fail</td><td class="fail">Expected <span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> property.</td></tr>
              <tr class="pass"><td>inst:User3</td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
            </tbody></table>
          </div>
          <script type="text/javascript">
          <!--
prepareHighlight(["inst-User6"], "highlight2", "lowlight2");
prepareHighlight(["state999", "reportedBy", "reportedIssue", "name999", "mbox999"], "highlight1", "lowlight1");
              -->
            </script>
          </div>

        <div class="namespace">
          <p>
            However, it may be more precise to require that for every issue, there is some user who reported it.
            This could be expressed in the data by describing every issue as being reported by (<span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span></span>) a user.
            Alternatively, an issue could be described as the object of a triple with predicate ex:reportedIssue.
            A triple constraint for such an incoming arc may expressed in the ShExC syntax by prefixing the constraint with a caret (<span class="inversePredicate top bot keyword lowlight2">^</span>) and in the ShExJ syntax with <span class="inversePredicate top bot keyword lowlight2">"inverse": true</span>.
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">unassigned</span> <span class="type">ex:</span><span class="constraint">assigned</span>]</span>;
 <span class="inversePredicate top bot keyword lowlight2">^</span><span class="reportedIssue lowlight1 top bot new"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> <span class="object">@<span class="shape-name">my:UserShape</span></span></span>
}

<span class="shape-name">my:UserShape</span> {
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="keyword object">LITERAL</span>;
  <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="keyword object">IRI</span>+
}</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": {
    <span class="shape-name">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:state"</span></span>,                      
            <span class="object">"value": { "type": "NodeConstraint",              </span>
            <span class="object">  "values": [ "ex:unassigned", "ex:assigned" ]</span>
            <span class="object">}                                             </span>
          },                                              
          <span class="reportedIssue lowlight1 top">{ "type": "TripleConstraint",                      </span>
          <span class="reportedIssue lowlight1    ">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reportedIssue"</span></span>, <span class="inversePredicate top bot keyword lowlight2">"inverse": true</span>,</span>
          <span class="reportedIssue lowlight1    ">  <span class="object">"value": { "type": "ShapeRef",</span>                   </span>
          <span class="reportedIssue lowlight1    ">  <span class="object">  "reference": <span class="shape-name">"my:IssueShape"</span></span>                   </span>
          <span class="reportedIssue lowlight1    ">  <span class="object">}              </span>                                  </span>
          <span class="reportedIssue lowlight1 bot">}                                                  </span>
        ]
      }
    },
    <span class="shape-name">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          { "type": "TripleConstraint",                   
            <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,                     
            <span class="object">"value": {                </span>
            <span class="object">  "type": "NodeConstraint",   </span>
            <span class="object">  "datatype": "xsd:string"</span>
            <span class="object">}                         </span>
          },                                              
          { "type": "TripleConstraint",                   
            <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:mbox"</span></span>,                     
            <span class="object">"value": { "type": "NodeConstraint",</span>              
            <span class="object">  "nodeKind": "iri"             </span>              
            <span class="object">},                              </span>
            <span class="object">"min": 1, "max": "*"            </span>
          }                                               
        ]
      }
    }
  }
}</pre>
            <div class="verticalDivider"><!-- acts as a divider --></div>
            <div style="float:left;">
            <pre class="instance turtle pass">
<span class="fullURL">inst:Issue1</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> .
<span class="fullURL">inst:user1</span> <span class="keyword predicate">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string object">"Bob Smith"</span></span> ;
    <span class="reportedIssue lowlight1 top bot new"><span class="object"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> <span class="fullURL object">inst:Issue1</span></span> ;
    <span class="mbox lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span></span> ;
    <span class="mbox lowlight1 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:rs@example.org&gt;</span> </span>.</pre>
            <pre class="instance turtle fail">
<span class="fullURL">inst:Issue2</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>         <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> ;
    <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>    <span class="fullURL object">inst:User2</span></span> .
<span class="fullURL">inst:user2</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>        <span class="string predicate">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>        <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span></span> ;
    <span class="mbox lowlight1 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>        <span class="fullURL object">&lt;mailto:rs@example.org&gt;</span> </span>.

<span class="fullURL">inst:Issue3</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>         <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> ;
    <span class="reportedIssue lowlight1 top bot errorSite new"><span class="predicate">ex:reportedIssue</span> <span class="fullURL object">inst:User3</span></span> .
<span class="fullURL">inst:user3</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>        <span class="string object">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>        <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span></span> ;
    <span class="mbox lowlight1 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>        <span class="fullURL object">&lt;mailto:rs@example.org&gt;</span> </span>.

<span class="fullURL">inst:Issue4</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;
    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>         <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> ;
    <span class="reportedIssue lowlight1 top bot errorSite new"><span class="predicate">ex:reportedIssue</span> <span class="fullURL object">inst:User4</span></span> .
<span class="fullURL">inst:user4</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span> ;
    <span class="name lowlight1 top bot errorSite"><span class="predicate">foaf:name</span>        <span class="string object">"Robert"</span></span> ;
    <span class="name lowlight1 top bot errorSite"><span class="predicate">foaf:name</span>        <span class="string object">"Bob Smith"</span></span> ;
    <span class="mbox lowlight1 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>        <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span></span> ;
</pre>
  </div>
            <div style="clear:both;"></div>
            <table class="example results">
              <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>inst:Issue1</td><td>my:IssueShape</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail"><td>inst:Issue2</td><td>my:IssueShape</td><td>fail</td><td class="fail">Missing incoming <span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> property.</td></tr>
              <tr class="fail"><td>inst:Issue3</td><td>my:IssueShape</td><td>fail</td><td class="fail"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> is in the wrong direction.</td></tr>
              <tr class="fail"><td>inst:Issue4</td><td>my:IssueShape</td><td>fail</td><td class="fail">Subject of <span class="predicate"><span class="type">ex:</span><span class="constant">reportedIssue</span></span> does not match <span class="shape-name">my:UserShape</span>;</td></tr>
              <tr class="fail"><td>inst:User4</td><td>my:UserShape</td><td>fail</td><td class="fail">Max cardinality of <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> exceeded.</td></tr>
            </tbody></table>
          </div>
          <script type="text/javascript">
          <!--
prepareHighlight(["inversePredicate"], "highlight2", "lowlight2");
prepareHighlight(["state999", "reportedBy", "reportedIssue", "reportedIssueInv", "name999", "mbox999"], "highlight1", "lowlight1");
              -->
            </script>
          </div>


        </section>

        <section id="negated-properties">
          <h3>Negative Triple Constraints</h3>
          <div class="namespace">
            <p>
              A schema may specify triples that <em>must not</em> appear in the data.
              For example, suppose there were a need for free-standing issues -- issues having no ex:component relationships, incoming or outgoing, with any other issues.
              This can be expressed by setting the cardinality of triple constraints on the predicate ex:component to zero, meaning that they should match zero triples in the data.
              That the shape must also not be the target of incoming triples with the predicate ex:component is expressed by prefixing the triple constraint with a caret (<code>^</code>).
            </p>
  
            <div class="example wrapper">
              <!-- ShExC example -->
              <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:SolitaryIssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">unassigned</span> <span class="type">ex:</span><span class="constant">assigned</span>]</span>;
 <span class="hilight-component top bot lowlight2"> <span class="predicate"><span class="type">ex:</span><span class="constant">component</span></span> <span class="object"><span class="keyword">.</span> <span class="new" style="">{0}</span></span></span> ;
 <span class="hilight-invComponent top bot lowlight2">^<span class="predicate"><span class="type">ex:</span><span class="constant">component</span></span> <span class="object"><span class="keyword">.</span> <span class="new" style="">{0}</span></span></span>
}</pre>

              <!-- JSON example -->
              <pre class="schema json" style="float:left;">
TODO</pre>
              <div class="verticalDivider"><!-- acts as a divider --></div>
              <div style="float:left;">
              <pre class="instance turtle">
<span class="hilight-componentless lowlight1 top"><span class="fullURL">inst:Issue1</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;                 </span>
<span class="hilight-componentless lowlight1    ">    <span class="other lowlight1 top bot"><span class="predicate"><span class="type">rdfs:</span><span class="constant">label</span></span>      <span class="string object">"smokes too much"</span></span> ;  </span>
<span class="hilight-componentless lowlight1 bot">    <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span> .      </span>

<span class="fail hilight-component lowlight1 top"><span class="fullURL">inst:Issue2</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;                 </span>
<span class="fail hilight-component lowlight1    ">    <span class="other lowlight1 top bot"><span class="predicate"><span class="type">dc:</span><span class="constant">creator</span></span>      <span class="string object">"Alice"</span></span> ;            </span>
<span class="fail hilight-component lowlight1    ">    <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span> ;      </span>
<span class="fail hilight-component lowlight1 bot">    <span class="errorSite predicate">ex:component</span>    <span class="fullURL object">inst:Issue3</span> .        </span>
<span>                                         </span>
<span class="fail hilight-invComponent lowlight1 top"><span class="fullURL">inst:Issue3</span> <span class="keyword predicate">a</span> <span class="object"><span class="type">ex:</span><span class="constant">Issue</span></span> ;                 </span>
<span class="fail hilight-invComponent lowlight1    ">    <span class="other lowlight1 top bot"><span class="predicate"><span class="type">rdfs:</span><span class="constant">label</span></span>      <span class="string object">"smokes too little"</span></span> ;</span>
<span class="fail hilight-invComponent lowlight1 bot">    <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span> .      </span></pre>
              </div>
              <div style="clear:both;"></div>
              <table class="example results">
                <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
                <tr class="pass hilight-componentless lowlight1 top"><td>inst:Issue1</td><td>my:SolitaryIssueShape</td><td>pass</td><td class="noreason"></td></tr>
                <tr class="fail hilight-component lowlight1"><td>inst:Issue2</td><td>my:SolitaryIssueShape</td><td>fail</td><td class="fail">Expected zero outgoing <span class="predicate"><span class="type">ex:</span><span class="constant">component</span></span> arcs.</td></tr>
                <tr class="fail hilight-invComponent lowlight1 bot"><td>inst:Issue3</td><td>my:SolitaryIssueShape</td><td>fail</td><td class="fail">Expected zero incoming <span class="predicate"><span class="type">ex:</span><span class="constant">component</span></span> arcs.</td></tr>
              </tbody></table>
            </div>
            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-componentless", "hilight-component", "hilight-invComponent"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </section>

          <section id="closed-shapes">
            <h4>Closing Shapes</h4>
        <div class="namespace">
          <p>
            Services backed by an RDF triple store may simply accept and store any triples not described in the schema;
            in such a case, the schema may only identify triples that the service understands and manipulates.
            At the other extreme are services or databases that accept or emit <em>only</em> the data structures described in a schema.
            In a ShEx schema, a shape may be defined to match <em>only</em> RDF data nodes that have outgoing triples matching the given set of triple constraints and <em>no other</em> outgoing triples.
            A shape declaration can be qualified to mean "this set of outgoing triples and no others" by using the keyword <span class="keyword closed lowlight2 top bot">CLOSED</span>.
          </p>

        <div id="closed-shapes-example-2" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:OpenUserShape</span> {
  <span class=""><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span></span>;
  <span class=""><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="object keyword">IRI</span></span>
}

<span class="shape-name">my:ClosedUserShape</span> <span class="keyword closed lowlight2 top bot">CLOSED</span> {
  <span class=""><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span></span>;
  <span class=""><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="object keyword">IRI</span></span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": [
    { "type": "Shape", "id": <span class="user lowlight2 top bot">"my:OpenUserShape"</span>
      "expression": { "type": "group",
        "expressions": [
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,                     </span>
          <span class="">  <span class="object">"value": {             </span>                       </span>
          <span class="">  <span class="object">  "type": "NodeConstraint",</span>                   </span>
          <span class="">  <span class="object">  "datatype": "xsd:string"</span>                    </span>
          <span class="">  <span class="object">}                      </span>                       </span>
          <span class="">},                                              </span>
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:mbox"</span></span>,                     </span>
          <span class="">  <span class="object">"value": { "type": "NodeConstraint",</span>          </span>
          <span class="">  <span class="object">  "nodeKind": "iri"             </span>              </span>
          <span class="">  <span class="object">}                                             </span></span>
          <span class="">}                                               </span>
        ]
      }
    },
    { "type": "Shape", "id": <span class="user lowlight2 top bot">"my:ClosedUserShape"</span>,
      <span class="closed lowlight2 top bot">"closed": "true"</span>,
      "expression": { "type": "group",
        "expressions": [
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,                     </span>
          <span class="">  <span class="object">"value": {             </span>                       </span>
          <span class="">  <span class="object">  "type": "NodeConstraint",</span>                   </span>
          <span class="">  <span class="object">  "datatype": "xsd:string"</span>                    </span>
          <span class="">  <span class="object">}                      </span>                       </span>
          <span class="">},                                              </span>
          <span class="">{ "type": "TripleConstraint",                   </span>
          <span class="">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:mbox"</span></span>,                     </span>
          <span class="">  <span class="object">"value": { "type": "NodeConstraint",</span>          </span>
          <span class="">  <span class="object">  "nodeKind": "iri"             </span>              </span>
          <span class="">  <span class="object">}                                             </span></span>
          <span class="">}                                               </span>
        ]
      }
    }
  ]
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle" style="float:left;">
<span class="user lowlight2 top bot"><span class="fullURL">inst:User1</span></span>
    <span class=""><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string object">"Bob Smith"</span></span> ;
    <span class=""><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:rs@example.org&gt;</span> </span>.

<span class="rdftype lowlight1 top bot"><span class="fullURL">inst:User2</span> <span class="errorSite"><span class="predicate">a</span> <span class="object">foaf:Person</span></span></span> ;
    <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string object">"Bob Smith"</span> ;
    <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>       <span class="fullURL object">&lt;mailto:bob@example.org&gt;</span> .

<span class="foafknows lowlight2 top bot errorSite">inst:User2 <span class="predicate">foaf:knows</span></span> <span class="object">inst:User1</span> ;
</pre>
  </div>
          <div style="clear:both;"></div>
      </div>
      <div style="clear:both;"> </div>
      <table class="example results">
        <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
        <tr class="pass"><td>inst:User1</td><td>my:OpenUserShape</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="pass"><td>inst:User2</td><td>my:OpenUserShape</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="pass"><td>inst:User1</td><td>my:ClosedUserShape</td><td>pass</td><td class="noreason"></td></tr>
        <tr class="fail hilight-component top lowlight2"><td>inst:User2</td><td>my:ClosedUserShape</td><td>fail</td><td class="fail">Unexpected <span class="rdftype lowlight1 top bot predicate"><span class="type">rdf:</span><span class="constant">type</span></span> and <span class="foafknows lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">knows</span></span></span> arcs.</td></tr>
      </tbody></table>
      <p>
        The <span class="predicate"><span class="type">foaf:</span><span class="constant">knows</span></span> arc invalidates <span class="fullURL">inst:User2</span> but not <span class="fullURL">inst:User2</span> because <span class="keyword closed lowlight2 top bot">CLOSED</span> applies only to outgoing arcs.
      </p>
      <script type="text/javascript">
      <!--
prepareHighlight(["closed", "rdftype", "foafknows"], "highlight2", "lowlight2");
      -->
      </script>
      </div>
          </section>

          <section id="extra-properties">
            <h4>Permitting Extra Properties</h4>
            <p>
              If a shape contains a triple constraint with predicate P, the shape is said to "mention" P.  By default, for an RDF data node to match that shape, every outgoing arc from that node that uses a mentioned predicate must match a triple constraint in the shape.  This is called "closing a property".  The following example says that all data triples that are mapped to my:UserShape and that use the property rdf:type (in ShExC syntax: <span class="keyword">a</span>) must have either <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> or ex:Employee as object.  The example data fails validation because ex:Manager is not a permitted object.
            </p>
        <div id="extra-properties-example-1" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span> {
  <span class="keyword">a</span> <span class="object">[<span class="type">ex:</span><span class="constant">Employee</span>]</span>;
  <span class="keyword">a</span> <span class="object">[<span class="type">foaf:</span><span class="constant">Person</span>]</span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": {
    <span class="shape-name hilight-shapeName lowlight2 top bot">"my:IssueShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          <span class="state      lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="state      lowlight1    ">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "rdf:type"</span></span>,                      </span>
          <span class="state      lowlight1    ">  <span class="object">"value": { "type": "NodeConstraint",              </span></span>
          <span class="state      lowlight1    ">  <span class="object">  "values": [ <span class="stateValue lowlight2 top bot object">"ex:Employee"</span> ]</span></span>
          <span class="state      lowlight1    ">  <span class="object">}                                             </span></span>
          <span class="state      lowlight1 bot">},                                              </span>
          <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="reportedBy lowlight1    ">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reportedBy"</span></span>,                 </span>
          <span class="reportedBy lowlight1    ">  <span class="object">"value": { "type": "NodeConstraint",</span>              </span>
          <span class="reportedBy lowlight1    ">  <span class="object">  "values": [ <span class="stateValue lowlight2 top bot object">"foaf:Person"</span> ]</span></span>
          <span class="reportedBy lowlight1    ">  <span class="object">}              </span>                               </span>
          <span class="reportedBy lowlight1 bot">}                                               </span>
        ]
      }
    }
  }
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle fail" style="float:left;">
<span class="user lowlight2 top bot"><span class="fullURL">inst:User4</span></span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span>, <span class="object"><span class="type">ex:</span><span class="constant">Employee</span></span>, <span class="errorSite object">ex:Manager</span>.</pre>
          </div>
          <div style="clear:both;"></div>
      </div>
            <p style="margin-bottom: 0;">
            The shape my:UserShape can be modified to accept any number of additional arcs with the predicate rdf:type by using the keyword <span class="keyword closed lowlight2 top bot">EXTRA</span> followed by the permitted predicate (here: <span class="keyword">a</span>).
            </p>
        <div id="extra-properties-example-2" class="example wrapper">
          <!-- ShExC example -->
          <pre class="schema shexc" style="float:left;">
<span class="shape-name hilight-shapeName lowlight2 top bot">my:UserShape</span> <span class="keywork predicate">EXTRA</span> <span class="keyword object">a</span> {
  <span class="keyword">a</span> <span class="object">[<span class="type">ex:</span><span class="constant">Employee</span>]</span>;
  <span class="keyword">a</span> <span class="object">[<span class="type">foaf:</span><span class="constant">Person</span>]</span>
}</pre>

          <!-- JSON example -->
          <pre class="schema json" style="float:left;">
{ "type": "Schema",
  "shapes": {
    <span class="shape-name hilight-shapeName lowlight2 top bot">"my:UserShape"</span>: { "type": "Shape",
      "expression": { "type": "group",
        "expressions": [
          <span class="state      lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="state      lowlight1    ">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "rdf:type"</span></span>,                      </span>
          <span class="state      lowlight1    ">  <span class="object">"value": { "type": "NodeConstraint",              </span></span>
          <span class="state      lowlight1    ">  <span class="object">  "values": [ <span class="stateValue lowlight2 top bot object">"ex:Employee"</span> ]</span></span>
          <span class="state      lowlight1    ">  <span class="object">}                                             </span></span>
          <span class="state      lowlight1 bot">},                                              </span>
          <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint",                   </span>
          <span class="reportedBy lowlight1    ">  <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reportedBy"</span></span>,                 </span>
          <span class="reportedBy lowlight1    ">  <span class="object">"value": { "type": "NodeConstraint",</span>              </span>
          <span class="reportedBy lowlight1    ">  <span class="object">  "values": [ <span class="stateValue lowlight2 top bot object">"foaf:Person"</span> ]</span></span>
          <span class="reportedBy lowlight1    ">  <span class="object">}              </span>                               </span>
          <span class="reportedBy lowlight1 bot">}                                               </span>
        ]
      }
    }
  }
}</pre>
          <div class="verticalDivider"><!-- acts as a divider --></div>
          <div style="float:left;">
          <pre class="instance turtle pass" style="float:left;">
<span class="user lowlight2 top bot"><span class="fullURL">inst:User4</span></span> <span class="keyword predicate">a</span> <span class="object"><span class="type">foaf:</span><span class="constant">Person</span></span>, <span class="object"><span class="type">ex:</span><span class="constant">Employee</span></span>, <span class="object"><span class="type">ex:</span><span class="constant">Manager</span></span>.</pre>
          </div>
      </div>
          </section>

      <section id="labeled-constraints">
        <h3>Reusing Triple Expressions</h3>
        <div class="namespace">
          <p>
            When multiple shapes share triple constraints in common, the triple constraints can be defined and labeled just once and referenced multiple times.
            In the example below, both users and employees are expected to have a <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> and <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span>.
            <span class="shape-name">my:UserShape</span> declares <span class="shape-name entity lowlight1 top bot">my:entity</span> (with a dollar-sign prefix) and <span class="shape-name">my:EmployeeShape</span> includes it (with an ampersand prefix).
          </p>

          <div class="example wrapper">
            <!-- ShExC example -->
            <pre id="schema-TE-reuse" class="schema shexc" style="float:left;">
<span class="prefixes"><span class="keyword">PREFIX</span> ex: <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> my: <span class="fullURL">&lt;http://my.example/#&gt;</span>
<span class="keyword">PREFIX</span> foaf: <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

</span><span class="shape-name">my:UserShape</span> {
  $<span class="shape-name entity lowlight1 top bot">my:entity</span> (
    <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="keyword object">LITERAL</span> ;
    <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="keyword object">IRI+</span>
  ) ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">userID</span></span> <span class="keyword object">LITERAL</span>
}

<span class="shape-name">my:EmployeeShape</span> {
  &amp;<span class="shape-name entity lowlight1 top bot">my:entity</span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">employeeID</span></span> <span class="keyword object">LITERAL</span>
}
</pre>

            <!-- JSON example -->
            <pre class="schema json" style="float:left;">{ "@context": "http://www.w3.org/ns/shex.jsonld",
  "type": "Schema", "shapes": [
    { "id": "http://my.example/#UserShape",
      "type": "Shape", "expression": {
        "type": "EachOf",
        "expressions": [
          { "type": "EachOf", "expressions": [
              { "type": "TripleConstraint",
                "predicate": "http://xmlns.com/foaf/0.1/name",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "nodeKind": "literal" } },
              { "type": "TripleConstraint", "min": 1, "max": "unbounded",
                "predicate": "http://xmlns.com/foaf/0.1/mbox",
                "valueExpr": {
                  "type": "NodeConstraint",
                  "nodeKind": "iri" } }
            ],
            "id": <span class="shape-name entity lowlight1 top bot">"http://my.example/#entity"</span>
          },
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#userID",
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "literal" } }
        ] }
    },
    { "id": "http://my.example/#EmployeeShape",
      "type": "Shape", "expression": {
        "type": "EachOf",
        "expressions": [
          <span class="shape-name entity lowlight1 top bot">"http://my.example/#entity"</span>,
          { "type": "TripleConstraint",
            "predicate": "http://ex.example/#employeeID",
            "valueExpr": {
              "type": "NodeConstraint",
              "nodeKind": "literal" } }
        ] } }
  ] }</pre>
              <pre class="instance turtle tryable">
<span class="prefixes" style="display:none"><span class="keyword">PREFIX</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">inst:</span> <span class="fullURL">&lt;http://example.com/users/&gt;</span>
<span class="keyword">PREFIX</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span>

</span><span class="type">inst:</span><span class="constant">Employee2</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="string object">"Bob"</span> ;
  <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="fullURL object">&lt;mailto:bob&#64;example.com&gt;</span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">employeeID</span></span> <span class="string object">"e02"</span> .

<span class="fail bot"><span class="type">inst:</span><span class="constant">Employee3</span> <span class="predicate"><span class="type">ex:</span><span class="constant">employeeID</span></span> <span class="string object">"e03"</span> .    </span>

<span class="type">inst:</span><span class="constant">User1</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="string object">"Alice"</span> ;
  <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="fullURL object">&lt;mailto:alice&#64;example.com&gt;</span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">userID</span></span> <span class="string object">"u01"</span> .
<a class="tryit" href="" data-shape-map="inst:Employee2@&lt;http://my.example/#EmployeeShape&gt;,inst:Employee3@&lt;http://my.example/#EmployeeShape&gt;">try it</a></pre>
            <div style="clear:both;"> </div>
            <table class="example results">
              <tbody><tr><th class="data">Node</th><th class="schema">Shape</th><th>Result</th><th>Reason</th></tr>
              <tr class="pass"><td>inst:Employee2</td><td>my:EmployeeShape</td><td>pass</td><td class="noreason"></td></tr>
              <tr class="fail hilight-component top lowlight2"><td>inst:Employee3</td><td>my:EmployeeShape</td><td>fail</td><td class="fail">Expected <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> and <span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> arcs.</td></tr>
              <tr class="pass"><td>inst:User1</td><td>my:UserShape</td><td>pass</td><td class="noreason"></td></tr>
            </tbody></table>
          </div>

          <script type="text/javascript">
            <!--
prepareHighlight(["entity"], "highlight2", "lowlight2");
            -->
          </script>
        </div>
      </section>

        <section id="repeated-properties">
          <h3>Repeated Properties</h3>
          <div class="namespace">
            <p>
              The use of generic predicates sometimes leads to their being used multiple times in the same shape.
              In the following example, we want to make sure that an issue that is <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> or <span class="object"><span class="type">ex:</span><span class="constant">resolved</span></span> has been reproduced both by a <span class="hilight-tester lowlight2 top bot">tester</span> and by a <span class="hilight-programmer lowlight2 top bot">programmer</span>.
            </p>

            <div class="example wrapper">
              <!-- ShExC example -->
              <pre class="schema shexc" style="float:left;">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">accepted</span> <span class="type">ex:</span><span class="constant">resolved</span>]</span>;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-tester lowlight2 top bot new"><span class="object">@<span class="shape-name">my:TesterShape</span></span></span>;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-programmer lowlight2 top bot new"><span class="object">@<span class="shape-name">my:ProgrammerShape</span></span></span>
}

<span class="hilight-tester lowlight2 top"><span class="shape-name">my:TesterShape</span> {          </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span>;   </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">testingRole</span>]</span></span>
<span class="hilight-tester lowlight2 bot">}                         </span>

<span class="hilight-programmer lowlight2 top"><span class="shape-name">my:ProgrammerShape</span> {                      </span>
<span class="hilight-programmer lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span>;                   </span>
<span class="hilight-programmer lowlight2    ">  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object">[<span class="type">ex:</span><span class="constant">ProgrammingDepartment</span>]</span></span>
<span class="hilight-programmer lowlight2 bot">}                                         </span>
</pre>

              <!-- JSON example -->
              <pre class="schema json" style="float:left;">
{
  "my:IssueShape": { "type": "Shape",
    "expression": { "type": "group",
      "expressions": [
        { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:state"</span></span>,
          <span class="object">"value": { "type": "NodeConstraint", "values": [ "ex:accepted", "ex:resolved" ]</span> }
        },
        { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reproducedBy"</span></span>,
          <span class="object">"value": { "type": "ShapeRef", <span class="hilight-tester lowlight2 top bot">"reference": "my:TesterShape"</span></span> }
        },
        { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reproducedBy"</span></span>,
          <span class="object">"value": { "type": "ShapeRef", <span class="hilight-programmer lowlight2 top bot">"reference": "my:ProgrammerShape"</span></span> }
        }
      ]
    }
  },
  <span class="hilight-tester lowlight2 top">"my:TesterShape": { "type": "Shape",                                     </span>
  <span class="hilight-tester lowlight2    ">  "expression": { "type": "group",                                       </span>
  <span class="hilight-tester lowlight2    ">    "expressions": [                                                     </span>
  <span class="hilight-tester lowlight2    ">      { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,            </span>
  <span class="hilight-tester lowlight2    ">        <span class="object">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>      </span>
  <span class="hilight-tester lowlight2    ">      },                                                                 </span>
  <span class="hilight-tester lowlight2    ">      { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:role"</span></span>,              </span>
  <span class="hilight-tester lowlight2    ">        <span class="object">"value": { "type": "NodeConstraint", "values": [ "ex:testingRole" ] }</span></span>
  <span class="hilight-tester lowlight2    ">      }                                                                  </span>
  <span class="hilight-tester lowlight2    ">    ]                                                                    </span>
  <span class="hilight-tester lowlight2    ">  }                                                                      </span>
  <span class="hilight-tester lowlight2 bot">},                                                                       </span>
  <span class="hilight-programmer lowlight2 top">"my:ProgrammerShape": { "type": "Shape",                                 </span>
  <span class="hilight-programmer lowlight2    ">  "expression": { "type": "group",                                       </span>
  <span class="hilight-programmer lowlight2    ">    "expressions": [                                                     </span>
  <span class="hilight-programmer lowlight2    ">      { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,            </span>
  <span class="hilight-programmer lowlight2    ">        <span class="object">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>      </span>
  <span class="hilight-programmer lowlight2    ">      },                                                                 </span>
  <span class="hilight-programmer lowlight2    ">      { "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:department"</span></span>,        </span>
  <span class="hilight-programmer lowlight2    ">        <span class="object">"value": { "type": "NodeConstraint", "values": [ "ex:Programming" ] }</span></span>
  <span class="hilight-programmer lowlight2    ">      }                                                                  </span>
  <span class="hilight-programmer lowlight2    ">    ]                                                                    </span>
  <span class="hilight-programmer lowlight2    ">  }                                                                      </span>
  <span class="hilight-programmer lowlight2 bot">}                                                                        </span>
}</pre>
              <div class="verticalDivider"><!-- acts as a divider --></div>
              <div style="float:left;">
              <pre class="instance turtle pass">
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-tester lowlight2 top bot object"><span class="type">inst:</span><span class="constant">Tester2</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-programmer lowlight2 top bot object"><span class="type">inst:</span><span class="constant">Programmer3</span></span> .

<span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester2</span>              </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span> ;  </span>
<span class="hilight-tester lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> .</span>

<span class="hilight-programmer lowlight2 top"><span class="type">inst:</span><span class="constant">Programmer3</span>                          </span>
<span class="hilight-programmer lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span> ;                  </span>
<span class="hilight-programmer lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .</span></pre>
              <div></div>
              <pre class="instance turtle fail">
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-tester lowlight2 top object"><span class="type">inst:</span><span class="constant">Tester2</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-tester lowlight2 bot object"><span class="type">inst:</span><span class="constant">Tester4</span></span> .

<span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester2</span>              </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;  </span>
<span class="hilight-tester lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> .</span>

<span class="hilight-tester lowlight2 top"><span class="type">inst:</span><span class="constant">Tester4</span>              </span>
<span class="hilight-tester lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;  </span>
<span class="hilight-tester lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> .</span></pre>
              </div>

            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-tester", "hilight-programmer"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </div>
            <p>
            Note that ShEx uses a partitioning strategy to find a solution whereby triples in the data are assigned to triple constraints in the schema.
              It is possible to construct schemas for which it is quite expensive to find a mapping from RDF data triple to ShEx triple constraint that satisfies the schema.
              In practical schemas, this is rarely a concern as the search space is quite small, however, certain mistakes in a schema can create a large search space.
            </p>
            <ul>
              <li>
                Accidentally duplicating many triple constraints in a shape causes the search space to explode.
                If you notice a validation process taking a long time or a lot of memory, look for duplicated chunks of the schema.
              </li>
              <li>
                For shapes with multiple triple constraints for the same predicate, try to minimize the overlap between the value expressions.
                For instance, if three types of inspection are necessary on a manufacturing checklist, use three different constraints for each of the inspection proprerties rather than requiring three different inspection properties with a value expression which is a union of all three types.
                This will make the validation process more efficient and will more effectively capture the business logic in the schema.
              </li>
            </ul>

          <div class="namespace" style="display:none;">

              <div class="issue" style="clear:both;">
              <p>
                There are two proposed strategies for validation:
              </p>
              <ul>
                <li>
                  <code>partition</code> - no triple can be used to satisfy more than one constraint.
                </li>
                <li>
                  <code>conjunction</code> - triples are allowed to satisfy more than one constraint.
                </li>
              </ul>
              <p>
                These two strategies are equivalent when no triple satisfies more than one constraint.
    In the example above, depending on the strategy being used, someone acting as <span class="hilight-testgrammer lowlight2 top bot">both a programmer and a tester</span> might or might not allow to satisfy the schema.
              </p>

              <p>
                Below are three variants of the example above.
                These each fail when evaluated by one of the strategies.
                Below each example is a workaround which works for the failing validation strategy.
              </p>
              <div style="float:left; max-width: 32%">
                <p>One individual acting as both tester and programmer.</p>
              <pre class="instance turtle pass">
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-testgrammer lowlight2 top bot"><span class="type">inst:</span><span class="constant">Testgrammer23</span></span> .

<span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer23</span>                        </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> ;                </span>
<span class="hilight-testgrammer lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .</span></pre>
              <p>fails <code>partition</code>, <span class="hilight-workaround1 lowlight2 top bot">workaround</span> is:</p>
              <pre class="schema shexc">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="object">ex:accepted ex:resolved</span>];
  ( <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:TesterShape</span></span>;
    <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround1 lowlight2 top new">| <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:TesterShape</span>    </span></span>
  <span class="hilight-workaround1 lowlight2 bot new">              <span class="object">AND @<span class="shape-name">my:ProgrammerShape</span></span></span>
  )
}
</pre>
              <!-- JSON example -->
              <pre class="schema json todo">TODO</pre>
              </div>
              <div style="float:left; max-width: 32%">
                <p>
                  One individual acts can be both a tester and a programmer, another is only a tester.
                </p>
              <pre class="instance turtle pass"><span class="comment"># one tester and one combination </span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="type">inst:</span><span class="constant">Tester2</span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-testgrammer lowlight2 top bot"><span class="type">inst:</span><span class="constant">Testgrammer23</span></span> .

<span class="type">inst:</span><span class="constant">Tester2</span>              
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;  
  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> .

<span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer23</span>                        </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> ;                </span>
<span class="hilight-testgrammer lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .</span></pre>
              <p>fails <code>conjunction</code>, <span class="hilight-workaround2 lowlight2 top bot">workaround</span> is:</p>
              <pre class="schema shexc">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="object">ex:accepted ex:resolved</span>];
  ( <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:TesterShape</span></span>;
    <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround2 lowlight2 top new">| <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:TesterShape</span></span>    </span>
  <span class="hilight-workaround2 lowlight2     new">          <span class="object">AND NOT @<span class="shape-name">my:ProgrammerShape</span></span></span>
  <span class="hilight-workaround2 lowlight2     new">  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> @<span class="shape-name">my:TesterShape</span>    </span>
  <span class="hilight-workaround2 lowlight2     new">              <span class="object">AND @<span class="shape-name">my:ProgrammerShape</span></span></span>
  <span class="hilight-workaround2 lowlight2     new">| <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:ProgrammerShape</span></span></span>
  <span class="hilight-workaround2 lowlight2     new">          <span class="object">AND NOT @<span class="shape-name">my:TesterShape</span></span>    </span>
  <span class="hilight-workaround2 lowlight2     new">  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> @<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround2 lowlight2 bot new">              <span class="object">AND @<span class="shape-name">my:TesterShape</span></span>    </span>
  )
}
</pre>
              <!-- JSON example -->
              <pre class="schema json todo">TODO</pre>
              </div>
              <div style="float:left; max-width: 32%">
                <p>
                  Two individuals can act as both a tester and a programmer.
                </p>
              <pre class="instance turtle pass"><span class="comment"># two combinations</span>
<span class="type">inst:</span><span class="constant">Issue1</span>
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> <span class="object"><span class="type">ex:</span><span class="constant">accepted</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer23</span></span> ;
  <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="hilight-testgrammer lowlight2 bot"><span class="type">inst:</span><span class="constant">Testgrammer45</span></span> .

<span class="type">inst:</span><span class="constant">Testgrammer23</span>                        
  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;                  
  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> ;                
  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .

<span class="hilight-testgrammer lowlight2 top"><span class="type">inst:</span><span class="constant">Testgrammer45</span>                        </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="type">xsd:</span><span class="constant">string</span> ;                  </span>
<span class="hilight-testgrammer lowlight2    ">  <span class="predicate"><span class="type">ex:</span><span class="constant">role</span></span> <span class="object"><span class="type">ex:</span><span class="constant">testingRole</span></span> ;                </span>
<span class="hilight-testgrammer lowlight2 bot">  <span class="predicate"><span class="type">ex:</span><span class="constant">department</span></span> <span class="object"><span class="type">ex:</span><span class="constant">ProgrammingDepartment</span></span> .</span></pre>
              <p>fails <code>conjunction</code>, <span class="hilight-workaround3 lowlight2 top bot">workaround</span> is:</p>
              <pre class="schema shexc">
<span class="shape-name">my:IssueShape</span> {
  <span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="object">ex:accepted ex:resolved</span>];
  ( <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:TesterShape</span></span>;
    <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:ProgrammerShape</span></span>
  <span class="hilight-workaround3 lowlight2 top new">| <span class="predicate"><span class="type">ex:</span><span class="constant">reproducedBy</span></span> <span class="object">@<span class="shape-name">my:TesterShape</span></span>       </span>
  <span class="hilight-workaround3 lowlight2 bot new">              <span class="object">AND @<span class="shape-name">my:ProgrammerShape</span>{2}</span></span>
  )
}
</pre>
              </div>

              <p style="clear:both;" class="TODO">
                The behavior in these cases currently uses the <code>partition</code> strategy. 
                Please send feedback to <a href="mailto:public-shex@w3.org">public-shex@w3.org</a> with advice and use cases, if the <code>conjunction</code> strategy is better suited for your use cases.
              </p>
            </div>

            <script type="text/javascript">
            <!--
prepareHighlight(["hilight-tester", "hilight-programmer", "hilight-testgrammer", "hilight-workaround1", "hilight-workaround2", "hilight-workaround3"], "highlight2", "lowlight2");
            -->
            </script>
          </div>
        </section>

<!--     <section id="semact"> -->
<!--       <h2>Semantic Actions</h2> -->
<!--       <p> -->
<!--         <code>Semantic actions</code> are pieces of arbitrary code attached to expressions in a shape. -->
<!--         They can be used to signal a validation failure or perform operations with side effects. -->
<!--         (The name "semantic action" comes from their serving a same role as semantic actions in parsers like Antlr or Yacc.) -->
<!--         Below is an example from a standard extension called "<a href="http://shex.io/extensions/Test/">Test</a>" which can only <code class="code">print(msg)</code> or <code class="code">fail(msg)</code>: -->
<!--       </p> -->
<!--         <div id="semantic-actions-example-1" class="example wrapper"> -->
<!--           <\!-\- ShExC example -\-> -->
<!--           <pre class="schema shexc" style="float:left;"><span class="comment"># schema (ShExC)</span> -->
<!-- <span class="shape-name hilight-shapeName lowlight2 top bot">my:IssueShape</span> { -->
<!--   <span class="state      lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span> [<span class="stateValue lowlight2 top bot object">ex:unassigned ex:assigned</span>]</span>; -->
<!--   <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span> <span class="object">@</span><span class="user lowlight2 top bot shape-name">my:UserShape</span></span> -->
<!-- } -->

<!-- <span class="shape-name">my:UserShape</span> { -->
<!--   <span class="eitherOr   lowlight2 top">(                              </span> -->
<!--      <span class="name       lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span></span> <span class="code">%test:{ print(o) %}</span> -->
<!--   <span class="eitherOr   lowlight2 bot">                               </span> -->
<!--   <span class="eitherOr   lowlight2 top">  |                            </span> -->
<!--       <span class="gname      lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">givenName</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span>+</span>; -->
<!--       <span class="fname      lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">familyName</span></span> <span class="object"><span class="type">xsd:</span><span class="constant">string</span></span></span> <span class="code">%test:{ fail("doomed") %}</span> -->
<!--   <span class="eitherOr   lowlight2 bot">);                             </span> -->
<!--   <span class="mbox       lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span> <span class="object keyword">IRI</span></span> -->
<!-- }</pre> -->

<!--           <\!-\- JSON example -\-> -->
<!--           <pre class="schema json" style="float:left;"> -->
<!-- { "type": "Schema", -->
<!--   "shapes": { -->
<!--     <span class="shape-name hilight-shapeName lowlight2 top bot">"my:IssueShape"</span>: { "type": "Shape", -->
<!--       "expression": { "type": "group", -->
<!--         "expressions": [ -->
<!--           <span class="state      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:state"</span></span>,</span> -->
<!--           <span class="state      lowlight1    ">  <span class="object">"value": { "type": "NodeConstraint",              </span></span> -->
<!--           <span class="state      lowlight1    ">  <span class="object">  "values": [ <span class="stateValue lowlight2 top bot object">"ex:unassigned", "ex:assigned"</span> ]</span></span> -->
<!--           <span class="state      lowlight1    ">  <span class="object">}                                             </span></span> -->
<!--           <span class="state      lowlight1 bot">},                                              </span> -->
<!--           <span class="reportedBy lowlight1 top">{ "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "ex:reportedBy"</span></span>,</span> -->
<!--           <span class="reportedBy lowlight1    ">  <span class="object">"value": { "type": "ShapeRef",</span> <span class="object">"reference": <span class="user lowlight2 top bot">"my:UserShape"</span></span> }</span> -->
<!--           <span class="reportedBy lowlight1 bot">}                                               </span> -->
<!--         ] -->
<!--       } -->
<!--     }, -->
<!--     <span class="shape-name">"my:UserShape"</span>: { "type": "Shape", -->
<!--       "expression": { "type": "group", -->
<!--         "expressions": [ -->
<!--           { "type": "OneOf", -->
<!--             "expressions": [ -->
<!--               <span class="eitherOr   lowlight2 top">                                                                  </span> -->
<!--               <span class="name       lowlight1 top">{ "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:name"</span></span>,        </span> -->
<!--               <span class="name       lowlight1 bot">  <span class="object">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>, -->
<!--                 "semActs": [ -->
<!--                   { "type": "SemAct", "name": "test:", "code": " print(o) " } -->
<!--                 ] }</span>, -->
<!--               <span class="eitherOr   lowlight2 bot">                                                                  </span> -->
<!--               <span class="eitherOr   lowlight2 top">                                                                  </span> -->
<!--               { "type": "group", -->
<!--                 "expressions": [ -->
<!--                   <span class="gname      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:givenName"</span></span>,  </span> -->
<!--                   <span class="gname      lowlight1    ">  <span class="object">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>,</span> -->
<!--                   <span class="gname      lowlight1 bot">  "min": 1, "max": "*" },                                     </span> -->
<!--                   <span class="fname      lowlight1 top">{ "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:familyName"</span></span>,  </span> -->
<!--                   <span class="fname      lowlight1 bot">  <span class="object">"value": { "type": "NodeConstraint", "datatype": "xsd:string" }</span>, -->
<!--                     "semActs": [ { "type": "SemAct", "name": "test:", -->
<!--                         "code": " fail(\"doomed\") " -->
<!--                       } -->
<!--                     ] }</span> -->
<!--                 ] -->
<!--               } -->
<!--               <span class="eitherOr   lowlight2 bot">                                                                  </span> -->
<!--             ] -->
<!--           }, -->
<!--           <span class="mbox       lowlight1 top">{ "type": "TripleConstraint", <span class="predicate"><span class="type">"predicate":</span><span class="constant"> "foaf:mbox"</span></span>, </span> -->
<!--           <span class="mbox       lowlight1 bot">  <span class="object">"value": { "type": "NodeConstraint", "nodeKind": "iri" }</span> }</span> -->
<!--         ] -->
<!--       } -->
<!--     } -->
<!--   } -->
<!-- }</pre> -->
<!--           <div class="verticalDivider"><\!-\- acts as a divider -\-></div> -->
<!--           <div style="float:left;"> -->
<!--           <pre class="instance turtle pass"><span class="comment"># passing data</span> -->
<!-- <span class="keyword">prefix</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span><span class="comment"> -->
<!-- </span><span class="keyword">prefix</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span> -->
<!-- <span class="keyword">prefix</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="comment"> -->
<!-- </span> -->
<!-- <span class="fullURL">inst:Issue1</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ; -->
<!--     <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="stateValue lowlight2 top bot"><span class="object"><span class="type">ex:</span><span class="constant">unassigned</span></span></span></span> ; -->
<!--     <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>   <span class="user lowlight2 top bot"><span class="fullURL">inst:User2</span></span></span> . -->

<!-- <span class="user lowlight2 top bot"><span class="fullURL">inst:User2</span></span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ; -->
<!--     <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot">"Bob Smith"</span></span> ; -->
<!--     <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 top"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span></span></span> ; -->
<!--     <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 bot"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> </span></span>.</pre> -->
<!--           <pre class="instance turtle fail"><span class="comment"># failing data</span> -->
<!-- <span class="keyword">prefix</span> <span class="type">ex:</span> <span class="fullURL">&lt;http://ex.example/#&gt;</span><span class="comment"> -->
<!-- </span><span class="keyword">prefix</span> <span class="type">foaf:</span> <span class="fullURL">&lt;http://xmlns.com/foaf/0.1/&gt;</span> -->
<!-- <span class="keyword">prefix</span> <span class="type">xsd:</span> <span class="fullURL">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="comment"> -->
<!-- </span> -->
<!-- <span class="fullURL">inst:Issue3</span> <span class="keyword">a</span> <span class="type">ex:</span><span class="constant">Issue</span> ; -->
<!--     <span class="state lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">state</span></span>        <span class="stateValue lowlight2 top bot"><span class="type">ex:</span><span class="constant errorSite">unsinged</span></span></span> ; -->
<!--     <span class="reportedBy lowlight1 top bot"><span class="predicate"><span class="type">ex:</span><span class="constant">reportedBy</span></span>   <span class="user lowlight2 top bot"><span class="fullURL">inst:User4</span></span></span> . -->

<!-- <span class="user lowlight2 top bot"><span class="fullURL">inst:User4</span></span> <span class="keyword">a</span> <span class="predicate"><span class="type">foaf:</span><span class="constant">Person</span></span> ; -->
<!--     <span class="name lowlight1 top bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">name</span></span>       <span class="string top bot">"Bob Smith"</span>, <span class="string top bot errorSite">"Robert Smith"</span></span> ; -->
<!--     <span class="mbox lowlight1 top"><span class="oneOrMore lowlight2 top"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 top"><span class="fullURL">&lt;mailto:bob@example.org&gt;</span></span></span> ; -->
<!--     <span class="mbox lowlight1 bot"><span class="oneOrMore lowlight2 bot"><span class="predicate"><span class="type">foaf:</span><span class="constant">mbox</span></span></span>       <span class="IRI lowlight2 bot"><span class="fullURL">&lt;mailto:rs@example.org&gt;</span> </span></span>.</pre> -->
<!--   </div> -->
<!--           <div style="clear:both;"></div> -->
<!--       </div> -->
<!--       <script type="text/javascript"> -->
<!--       <\!-\- -->
<!-- prepareHighlight(["oneOrMore", "IRI", "stateValue", "user", "string"], "highlight2", "lowlight2"); -->
<!-- prepareHighlight(["state", "reportedBy", "name", "mbox"], "highlight1", "lowlight1"); -->
<!--       -\-> -->
<!--       </script> -->
<!--     </section> -->
  </section>

      <section id="relationship">
        <h2>Relationship of ShEx to RDF and OWL</h2>
    	<p>
        ShEx is designed to fill a long-recognized gap in Semantic Web technology.
        The Resource Description Framework language (RDF), and the more expressive Web Ontology Language (OWL), were designed for making statements about things "in the world" or, more precisely, about things in a conceptual caricature of the world.
        Things in that caricature may include anything from people, books, abstract ideas, and Web pages to planets or refrigerators.
        By design, RDF and OWL were optimized for aggregating information from multiple sources and for processing incomplete information.
        If a model in OWL says that a person has two biological parents, and only one parent is described in a given graph, an OWL processor will not report a mismatch between the model and the graph because the second parent is assumed to exist even if it is not described in the data.
        In other words, the graph <em>could</em> describe the second parent if more triples were supplied.
        In logic, this is called the "open world assumption".
    	</p>
    	<p>
        In contrast, real-world data applications must often test the integrity of their data by flagging such omissions as non-conformant, and the ShEx language was designed for use in making such conformance tests.
        Where an RDF graph describes things in the caricature of the world, a ShEx schema describes things that are actually "in the data" of RDF data graphs.
        A shape expression refers to an RDF graph as a collection of abstract-syntactic entities: IRIs, blank nodes, literals, and triples, seen either as incoming arcs or outgoing arcs, with subjects, predicates, and objects.
        Inasmuch as a ShEx schema is tested against a given RDF data graph, and does not consider potential but unknown data outside of that graph, the ShEx model of conformance testing follows the "closed world assumption".
        That said, a ShEx schema can specify a "closed" interpretation, meaning that data can conform only if it includes only triples specified in the schema, or an "open" interpretation, meaning that data triples not specified in the schema are simply ignored.
    	</p>
    	<p>
        It should be noted that a ShEx schema is valid as an RDF expression in an open-world sense.
        A ShEx schema describes something in the world, where that "something" happens to be the set of abstract-syntactic components that comprise an RDF graph.
        However, such an interpretation is of no use in practical terms.
        The utility of a ShEx schema derives from its use for testing against the abstract-syntactic components "in the data" of an RDF graph to yield a conformance test result.
        It should also be noted that a ShEx schema is not an RDF schema, even though both describe RDF data.
        For historical reasons, "RDF Schema" is the name of a language for defining RDF vocabularies and for specifying semantic relationships between terms that can be used to infer relationships between RDF resources [[rdf-schema]].  A ShEx schema, in contrast, defines structural constraints, analogously to relational or XML schemas.
    	</p>
      </section>

      <section id="namespaces" class="appendix">
        <h2>Namespaces in this Document</h2>

          <table style="border-collapse: collapse; border-color: #000000" border="1" cellpadding="5">
            <tr>
              <th>Prefix</th>
              <th colspan="2">Namespace</th>
            </tr>
            <!-- tr>
              <td>sh:</td>
              <td>http://www.w3.org/ns/shacl#</td>
            </tr -->
            <tr>
              <td>rdf:</td>
              <td colspan="2">http://www.w3.org/1999/02/22-rdf-syntax-ns#</td>
            </tr>
            <tr>
              <td>xsd:</td>
              <td colspan="2">http://www.w3.org/2001/XMLSchema#</td>
            </tr>
            <tr>
              <th colspan="2">Example namespaces</th>
              <th>Used in</th>
            </tr>
            <tr>
              <td>foaf:</td>
              <td>http://xmlns.com/foaf/0.1/</td>
              <td>Friend Of A Friend vocabulary</td>
            </tr>
            <tr>
              <td>ex:</td>
              <td>http://ex.example/ns#</td>
              <td>random application ontology</td>
            </tr>
            <tr>
              <td>my:</td>
              <td>http://my.example/ns#</td>
              <td>shape declarations</td>
            </tr>
            <tr>
              <td>inst:</td>
              <td>http://inst.example/ns#</td>
              <td>instance data</td>
            </tr>
          </table>
      </section>
        <script type="application/javascript">
  var bodyKeypressCallbacks = {};

  /* a form like
        <form id="langOptions" action="">View as: <input type="radio" name="presLang" value="turtle" checked="checked">ShExC (press 'c')</input> <input type="radio" name="presLang" value="json">JSON (press 'j')</input> .</form>
  controls display of sections like
  <pre class="schema shexc">...</pre>
  <pre class="schema json">...</pre>
   */
  [
    { lookIn: ".schema", form: "#langOptions", radioName: "presLang", keys:
      { 74: "json", 106: "json", 67: "shexc", 99: "shexc" }
    }
  ].forEach(function (x) {

    /* In lookIn, reveal classes selected by radioName; hide others.
     */
    function revealClass (lookIn, form, radioName) {
            $(lookIn+"."+$(form+" input[name="+radioName+"]").not(":checked").val()).hide();
            $(lookIn+"."+$(form+" input[name="+radioName+"]" +    ":checked").val()).show();
          }
    /* Look in all lookIn containers for the height different of from and to targets.
     */
          function adjustHeight (lookIn, from, to) {
            var visibleTop = $(window).scrollTop();
            var all = $(lookIn+"."+from); // all containers of from (and presumably, to)
            var adj = 0;
            for (var i = 0; i < all.length; ++i) {
              var elt = all.slice(i, i+1);
              if (elt.offset().top >= visibleTop) // stop when we pass the current scroll top.
    break;
              adj += elt.siblings("."+to).height() - elt.height();
            }
            $(window).scrollTop($(window).scrollTop() + adj); // move the scroll top.
          }

          var inputs = $(x.form + " input[name="+x.radioName+"]");
    // Listen for checkbox changes.
          inputs.change(function() {revealClass(x.lookIn, x.form, x.radioName);})
    // Show only the currently selected class.
          revealClass(x.lookIn, x.form, x.radioName);
    // Assign callbacks the the associated keycodes.
    Object.keys(x.keys).forEach(function (k) {
      bodyKeypressCallbacks[k] = function () {
    var sourceClass = $("input[name="+x.radioName+"]:checked", x.form).val();
    var targetClass = x.keys[k];
        // If the corresponding radio button isn't already selected,
              if(!inputs.filter("[value="+targetClass+"]").is(":checked")) {
    // adjust the height from the current class to the new class;
    adjustHeight(x.lookIn, sourceClass, targetClass);
    // set it as "checked";
    inputs.filter("[value="+targetClass+"]").prop("checked", true); // .change() did nothing
    // swap which is displayed.
    revealClass(x.lookIn, x.form, x.radioName);
    updateAllTryItLinks(targetClass);
              }
        return false;
      };
    });
  });
        $("html > body").keypress(function (evt) {
          if (evt.ctrlKey)
            return true; // don't interfere with browser control keys.
    if (evt.which in bodyKeypressCallbacks)
      return bodyKeypressCallbacks[evt.which]();
    return true;
        });
        </script>

    </body>
</html>
